"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[293],{3124:function(e,t,n){n.r(t),n.d(t,{SignUp:function(){return G}});var r=n(5614),i=n(5958),a=n(492),s=n(5352),o=n(399),l=n(3931),d=n(4648),c=n(9533),u=n(4041),p=n(6585),g=n(4219),m=n(2203),h=n(5801),f=n(7966),x=n(8256),b=n(429),v=n(1085),E=n(4792),R=new Set(["firstName","lastName","emailAddress","username","password","phoneNumber"]);function j(e){const t={};return e.forEach((({value:e},n)=>{(function(e){return R.has(e)})(n)&&void 0!==e&&(t[n]=e)})),t}var y=(0,m.mj)({actors:{attempt:(0,h.Sx)((({input:{fields:e,parent:t}})=>{const n=j(e);return t.getSnapshot().context.clerk.client.signUp.update(n)}))},actions:{setFormErrors:({context:e,event:t})=>{(0,a.Ye)(t),e.formRef.send({type:"ERRORS.SET",error:t.error})},markFormAsProgressive:({context:e})=>{const t=e.parent.getSnapshot().context.clerk.client.signUp,n=t.missingFields.map(g.sF),r=t.optionalFields.map(g.sF),i=t.requiredFields.map(g.sF),a=new Map;for(const s of i.concat(r))s in t&&a.set(s,t[s]);e.formRef.send({type:"MARK_AS_PROGRESSIVE",missing:n,optional:r,required:i,defaultValues:a})},unmarkFormAsProgressive:({context:e})=>e.formRef.send({type:"UNMARK_AS_PROGRESSIVE"}),sendToNext:({context:e,event:t})=>e.parent.send({type:"NEXT",resource:t.output}),sendToLoading:a.mn},types:{}}).createMachine({id:"SignUpContinue",context:({input:e})=>({basePath:e.basePath||a.ii,formRef:e.formRef,parent:e.parent,loadingStep:"continue"}),entry:"markFormAsProgressive",onDone:{actions:"unmarkFormAsProgressive"},initial:"Pending",states:{Pending:{tags:["state:pending"],description:"Waiting for user input",on:{SUBMIT:{target:"Attempting",reenter:!0}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attempt",src:"attempt",input:({context:e})=>({parent:e.parent,fields:e.formRef.getSnapshot().context.fields}),onDone:{actions:["sendToNext","sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}),k=["emailAddress","phoneNumber"],S=["firstName","lastName","emailAddress","username","phoneNumber"],T=(0,m.mj)({actors:{attempt:(0,h.Sx)((({input:{fields:e,parent:t,params:n}})=>{const r=j(e);return t.getSnapshot().context.clerk.client.signUp.create({...r,...n})})),attemptWeb3:(0,h.Sx)((({input:{parent:e,strategy:t}})=>{if("web3_metamask_signature"===t)return e.getSnapshot().context.clerk.client.signUp.authenticateWithMetamask();if("web3_coinbase_wallet_signature"===t)return e.getSnapshot().context.clerk.client.signUp.authenticateWithCoinbaseWallet();throw new a.X$(`Unsupported Web3 strategy: ${t}`)})),thirdParty:a.tX},actions:{sendToNext:({context:e,event:t})=>e.parent.send({type:"NEXT",resource:t.output}),sendToLoading:a.mn,setFormRef:(0,x.a)((({event:e})=>({formRef:e.formRef}))),setFormDisabledTicketFields:(0,x.b)((({context:e,enqueue:t})=>{if(!e.ticket)return;const n=e.formRef.getSnapshot().context.fields;for(const r of k)n.has(r)&&t.sendTo(e.formRef,{type:"FIELD.DISABLE",field:{name:r}})})),setFormErrors:(0,x.c)((({context:e})=>e.formRef),(({event:e})=>((0,a.Ye)(e),{type:"ERRORS.SET",error:e.error}))),setDefaultFormValues:({context:e})=>{const t=e.parent.getSnapshot().context.clerk.client.signUp,n=new Map;for(const r of S)r in t&&n.set(r,t[r]);e.formRef.send({type:"PREFILL_DEFAULT_VALUES",defaultValues:n})}},guards:{isMissingRequirements:({context:e})=>{var t,n,r;return"missing_requirements"===(null==(r=null==(n=null==(t=e.parent.getSnapshot().context.clerk)?void 0:t.client)?void 0:n.signUp)?void 0:r.status)},hasTicket:({context:e})=>Boolean(e.ticket),isExampleMode:({context:e})=>Boolean(e.parent.getSnapshot().context.exampleMode)},types:{}}).createMachine({id:"SignUpStart",context:({input:e})=>({basePath:e.basePath||a.ii,formRef:e.formRef,parent:e.parent,loadingStep:"start",ticket:e.ticket}),entry:"setDefaultFormValues",initial:"Init",on:{SET_FORM:{actions:"setFormRef"}},states:{Init:{description:"Handle ticket, if present; Else, default to Pending state. Per tickets, `Attempting` makes a `signUp.create` request allowing for an incomplete sign up to contain progressively filled fields on the Start step.",always:[{guard:(0,p.E)(["hasTicket","isMissingRequirements"]),target:"Pending"},{guard:"hasTicket",target:"Attempting"},{target:"Pending"}]},Pending:{tags:["state:pending"],description:"Waiting for user input",on:{SUBMIT:{guard:(0,p.F)("isExampleMode"),target:"Attempting",reenter:!0},"AUTHENTICATE.WEB3":{guard:(0,p.F)("isExampleMode"),target:"AttemptingWeb3",reenter:!0}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptCreate",src:"attempt",input:({context:e})=>({fields:e.formRef.getSnapshot().context.fields,parent:e.parent,params:e.ticket?{strategy:"ticket",ticket:e.ticket}:{}}),onDone:{actions:["setFormDisabledTicketFields","sendToNext","sendToLoading"]},onError:{actions:["setFormDisabledTicketFields","setFormErrors","sendToLoading"],target:"Pending"}}},AttemptingWeb3:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptCreateWeb3",src:"attemptWeb3",input:({context:e,event:t})=>((0,m.DT)(t,"AUTHENTICATE.WEB3"),{parent:e.parent,strategy:t.strategy}),onDone:{actions:["sendToNext","sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}),A=(e,t)=>{const n=[{type:"isFieldUnverified",params:{field:e}}];return t&&n.push({type:"isStrategyEnabled",params:{attribute:e,strategy:t}}),(0,p.E)(n)},C=(0,m.mj)({actors:{prepare:(0,h.Sx)((({input:{params:e,parent:t}})=>{const n=t.getSnapshot().context.clerk;return"email_link"===e.strategy&&e.redirectUrl&&(e.redirectUrl=n.buildUrlWithAuth(e.redirectUrl)),n.client.signUp.prepareVerification(e)})),attempt:(0,h.Sx)((async({input:{params:e,parent:t}})=>t.getSnapshot().context.clerk.client.signUp.attemptVerification(e))),attemptEmailLinkVerification:(0,h.SP)((({receive:e,sendBack:t,input:{parent:n}})=>{const{run:r,stop:i}=(0,b.v)(),s=n.getSnapshot().context.clerk;return r((async()=>s.client.signUp.reload().then((e=>{const n=e.status,r=e.verifications.emailAddress.status;if("complete"===n)return t({type:"EMAIL_LINK.VERIFIED",resource:e});switch(r){case"verified":case"transferable":case"expired":t({type:`EMAIL_LINK.${r.toUpperCase()}`,resource:e});break;case"failed":t({type:"EMAIL_LINK.FAILED",error:new a.jq("email-link-verification-failed","Email verification failed"),resource:e});break;default:return}i()})).catch((e=>{i(),new a.X$(e)})))),e((e=>{"STOP"===e.type&&i()})),()=>i()}))},actions:{resendableTick:(0,x.a)((({context:e})=>({resendable:1===e.resendableAfter,resendableAfter:e.resendableAfter>1?e.resendableAfter-1:e.resendableAfter}))),resendableReset:(0,x.a)({resendable:!1,resendableAfter:a.k3}),sendToLoading:a.mn,setFormErrors:(0,x.c)((({context:e})=>e.formRef),(({event:e})=>((0,a.Ye)(e),{type:"ERRORS.SET",error:e.error})))},guards:{isComplete:({context:e})=>"complete"===e.resource.status,isFieldUnverified:({context:e,event:t},{field:n})=>{let r=e.resource;return"NEXT"===(null==t?void 0:t.type)&&t.resource&&(r=t.resource),r.unverifiedFields.includes(n)},isResendable:({context:e})=>e.resendable||0===e.resendableAfter,isStrategyEnabled:({context:e},{attribute:t,strategy:n})=>{var r;return Boolean(null==(r=e.attributes)?void 0:r[t].verifications.includes(n))},shouldVerifyPhoneCode:A("phone_number"),shouldVerifyEmailLink:A("email_address","email_link"),shouldVerifyEmailCode:A("email_address","email_code")},delays:{emailLinkTimeout:3e5,resendableTimeout:1e3},types:{}}).createMachine({id:"SignUpVerification",initial:"Init",context:({input:e})=>({attributes:e.attributes,basePath:e.basePath||a.ii,loadingStep:"verifications",formRef:e.formRef,parent:e.parent,resendable:!1,resendableAfter:a.k3,resource:e.resource}),on:{NEXT:[{guard:"isComplete",actions:(0,x.s)((({event:e})=>({type:"NEXT",resource:e.resource})))},{description:"Validate via phone number",guard:"shouldVerifyPhoneCode",target:".PhoneCode"},{description:"Validate via email link",guard:"shouldVerifyEmailLink",target:".EmailLink"},{description:"Verify via email code",guard:"shouldVerifyEmailCode",target:".EmailCode"},{actions:(0,x.s)((({event:e})=>({type:"NEXT",resource:e.resource})))}]},states:{Init:{always:[{description:"Validate via phone number",guard:"shouldVerifyPhoneCode",target:"PhoneCode"},{description:"Validate via email link",guard:"shouldVerifyEmailLink",target:"EmailLink"},{description:"Verify via email code",guard:"shouldVerifyEmailCode",target:"EmailCode"},{actions:(0,x.s)((({context:e})=>({type:"NEXT",resource:e.resource})))}]},EmailLink:{tags:["verification:method:email","verification:category:link","verification:email_link"],initial:"Preparing",on:{RETRY:".Preparing","EMAIL_LINK.RESTART":{target:".Attempting",reenter:!0},"EMAIL_LINK.FAILED":{actions:[{type:"setFormErrors",params:({event:e})=>({error:e.error})},(0,x.a)({resource:({event:e})=>e.resource})],target:".Pending"},"EMAIL_LINK.*":{actions:(0,x.b)((({enqueue:e,event:t})=>{"EMAIL_LINK.RESTART"!==t.type&&(e.assign({resource:t.resource}),e.raise({type:"NEXT",resource:t.resource}))}))}},states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"prepareEmailLinkVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"email_link",redirectUrl:`${e.basePath}${a.Vu}`}}),onDone:{target:"Attempting",actions:(0,x.a)({resource:({event:e})=>e.output})},onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{description:"Placeholder for allowing resending of email link",tags:["state:pending"],on:{NEXT:"Preparing"}},Attempting:{tags:["state:attempting"],invoke:{id:"attemptEmailLinkVerification",src:"attemptEmailLinkVerification",input:({context:e})=>({parent:e.parent})},after:{emailLinkTimeout:{description:"Timeout after 5 minutes",target:"Pending",actions:(0,x.c)((({context:e})=>e.formRef),{type:"ERRORS.SET",error:new a.jq("verify-email-link-timeout","Email link verification timed out")})}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,x.l)((({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`))}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}}}},EmailCode:{tags:["verification:method:email","verification:category:code","verification:email_code"],initial:"Preparing",states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"prepareEmailAddressCodeVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"email_code"}}),onDone:[{guard:"shouldVerifyEmailCode",target:"Pending"},{actions:[(0,x.a)({resource:({event:e})=>e.output}),(0,p.O)((({event:e})=>({type:"NEXT",resource:e.output})))]}],onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{tags:["state:pending"],on:{RETRY:"Preparing",SUBMIT:{target:"Attempting",reenter:!0}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,x.l)((({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`))}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptEmailAddressCodeVerification",src:"attempt",input:({context:e})=>{var t;return{parent:e.parent,params:{strategy:"email_code",code:(null==(t=e.formRef.getSnapshot().context.fields.get("code"))?void 0:t.value)||""}}},onDone:{actions:[(0,p.O)((({event:e})=>({type:"NEXT",resource:e.output}))),"sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}},PhoneCode:{tags:["verification:method:phone","verification:category:code","verification:phone_code"],initial:"Preparing",states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"preparePhoneCodeVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"phone_code"}}),onDone:[{guard:"shouldVerifyPhoneCode",target:"Pending",actions:(0,x.a)({resource:({event:e})=>e.output})},{actions:[(0,x.a)({resource:({event:e})=>e.output}),(0,p.O)((({event:e})=>({type:"NEXT",resource:e.output})))]}],onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{tags:["state:pending"],on:{RETRY:"Preparing",SUBMIT:{target:"Attempting",reenter:!0}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,x.l)((({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`))}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptPhoneNumberVerification",src:"attempt",input:({context:e})=>{var t;return{parent:e.parent,params:{strategy:"phone_code",code:(null==(t=e.formRef.getSnapshot().context.fields.get("code"))?void 0:t.value)||""}}},onDone:{actions:[(0,p.O)((({event:e})=>({type:"NEXT",resource:e.output}))),"sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}}}),N=e=>({context:t},n)=>{var r,i;return null!=(i=null==(r=t.router)?void 0:r.match(e))&&i},_=e=>({context:t,event:n},r)=>{var i,a,s,o;return(null==(i=null==n?void 0:n.resource)?void 0:i.status)===e||(null==(o=null==(s=null==(a=t.clerk)?void 0:a.client)?void 0:s.signUp)?void 0:o.status)===e},U=(0,m.mj)({actors:{continueMachine:y,startMachine:T,thirdPartyMachine:a.tX,verificationMachine:C},actions:{clearFormErrors:(0,x.c)((({context:e})=>e.formRef),{type:"ERRORS.CLEAR"}),logUnknownError:e=>console.error("Unknown error:",e),navigateInternal:({context:e},{path:t,force:n=!1})=>{if(!e.router)return;if(!n&&(0,a.Y6)())return;if(e.exampleMode)return;const r=(0,f.oq)(e.router.basePath,t);r!==e.router.pathname()&&e.router.shallowPush(r)},navigateExternal:({context:e},{path:t})=>{var n;return null==(n=e.router)?void 0:n.push(t)},raiseNext:(0,p.O)({type:"NEXT"}),setActive:({context:e,event:t},n)=>{if(e.exampleMode)return;const r=(null==n?void 0:n.sessionId)||(null==n?void 0:n.useLastActiveSession)&&e.clerk.client.lastActiveSessionId||((null==t?void 0:t.resource)||e.clerk.client.signUp).createdSessionId;e.clerk.setActive({session:r,beforeEmit:()=>{var t,n;return null==(n=e.router)?void 0:n.push((null==(t=e.router)?void 0:t.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl())}})},delayedReset:(0,p.O)({type:"RESET"},{delay:3e3}),setError:(0,x.a)({error:(e,{error:t})=>t||new a.X$("Unknown error")}),setFormOAuthErrors:({context:e})=>{const t=e.clerk.client.signIn.firstFactorVerification.error;if(!t)return;let n;switch(t.code){case a.OQ.NOT_ALLOWED_TO_SIGN_UP:case a.OQ.OAUTH_ACCESS_DENIED:case a.OQ.NOT_ALLOWED_ACCESS:case a.OQ.SAML_USER_ATTRIBUTE_MISSING:case a.OQ.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case a.OQ.USER_LOCKED:n=new a.jq(t.code,t.longMessage);break;default:n=new a.jq("unable_to_complete","Unable to complete action at this time. If the problem persists please contact support.")}e.formRef.send({type:"ERRORS.SET",error:n})},transfer:({context:e})=>{var t;return null==(t=e.router)?void 0:t.push(e.clerk.buildSignInUrl())}},guards:{areFieldsMissing:({context:e})=>{var t,n,r,i;return(null==(i=null==(r=null==(n=null==(t=e.clerk)?void 0:t.client)?void 0:n.signUp)?void 0:r.missingFields)?void 0:i.length)>0},areFieldsUnverified:({context:e})=>{var t,n,r,i;return(null==(i=null==(r=null==(n=null==(t=e.clerk)?void 0:t.client)?void 0:n.signUp)?void 0:r.unverifiedFields)?void 0:i.length)>0},hasAuthenticatedViaClerkJS:({context:e})=>Boolean(null===e.clerk.client.signUp.status&&e.clerk.client.lastActiveSessionId),hasCreatedSession:({context:e})=>{var t;return Boolean(null==(t=e.router)?void 0:t.searchParams().get(a.kj.createdSession))},hasClerkStatus:({context:e},t)=>{var n;const r=null==(n=e.router)?void 0:n.searchParams().get(a.kj.status);return t?r===t.status:Boolean(r)},hasClerkTransfer:({context:e})=>{var t;return Boolean(null==(t=e.router)?void 0:t.searchParams().get(a.kj.transfer))},hasResource:({context:e})=>Boolean(e.clerk.client.signUp),hasTicket:({context:e})=>Boolean(e.ticket),isLoggedInAndSingleSession:(0,p.E)(["isLoggedIn","isSingleSessionMode",(0,p.F)("isExampleMode")]),isStatusAbandoned:_("abandoned"),isStatusComplete:({context:e,event:t})=>{var n,r;const i=null==t?void 0:t.resource,a=null==(r=null==(n=e.clerk)?void 0:n.client)?void 0:r.signUp;return"complete"===(null==i?void 0:i.status)&&Boolean(null==i?void 0:i.createdSessionId)||"complete"===(null==a?void 0:a.status)&&Boolean(null==a?void 0:a.createdSessionId)},isStatusMissingRequirements:_("missing_requirements"),isLoggedIn:(0,p.G)(["isStatusComplete",({context:e})=>Boolean(e.clerk.user)]),isSingleSessionMode:({context:e})=>{var t,n;return Boolean(null==(n=null==(t=e.clerk)?void 0:t.__unstable__environment)?void 0:n.authConfig.singleSessionMode)},isRestricted:({context:e})=>{var t,n;return(null==(n=null==(t=e.clerk)?void 0:t.__unstable__environment)?void 0:n.userSettings.signUp.mode)===a.P6.RESTRICTED},isRestrictedWithoutTicket:(0,p.E)(["isRestricted",(0,p.F)("hasTicket")]),isExampleMode:({context:e})=>Boolean(e.exampleMode),isMissingRequiredFields:(0,p.E)(["isStatusMissingRequirements","areFieldsMissing"]),isMissingRequiredUnverifiedFields:(0,p.E)(["isStatusMissingRequirements","areFieldsUnverified"]),needsIdentifier:(0,p.G)(["statusNeedsIdentifier",N("/")]),needsContinue:(0,p.E)(["statusNeedsContinue",N("/continue")]),needsVerification:(0,p.E)(["statusNeedsVerification",N("/verify")]),needsCallback:N(a.aB),statusNeedsIdentifier:(0,p.G)([(0,p.F)("hasResource"),"isStatusAbandoned"]),statusNeedsContinue:(0,p.G)(["isMissingRequiredFields"]),statusNeedsVerification:(0,p.G)(["isMissingRequiredUnverifiedFields",(0,p.E)(["areFieldsMissing","hasClerkStatus"])])},delays:{"TIMEOUT.POLLING":3e5},types:{}}).createMachine({id:"SignUpRouter",context:{},initial:"Idle",on:{"AUTHENTICATE.OAUTH":{actions:(0,x.c)(a.AG,(({context:e,event:t})=>{var n,r,i,s;return{type:"REDIRECT",params:{strategy:t.strategy,redirectUrl:`${(null==(n=e.router)?void 0:n.mode)===a.N_.virtual?null==(r=e.clerk.__unstable__environment)?void 0:r.displayConfig.signUpUrl:null==(i=e.router)?void 0:i.basePath}${a.aB}`,redirectUrlComplete:(null==(s=e.router)?void 0:s.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl()}}}))},"AUTHENTICATE.SAML":{actions:(0,x.c)(a.AG,(({context:e})=>{var t,n,r,i,s;return{type:"REDIRECT",params:{strategy:"saml",emailAddress:null==(t=e.formRef.getSnapshot().context.fields.get("emailAddress"))?void 0:t.value,redirectUrl:`${(null==(n=e.router)?void 0:n.mode)===a.N_.virtual?null==(r=e.clerk.__unstable__environment)?void 0:r.displayConfig.signUpUrl:null==(i=e.router)?void 0:i.basePath}${a.aB}`,redirectUrlComplete:(null==(s=e.router)?void 0:s.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl()}}}))},"AUTHENTICATE.WEB3":{actions:(0,x.c)("start",(({event:e})=>e))},"FORM.ATTACH":{description:"Attach/re-attach the form to the router.",actions:(0,x.b)((({enqueue:e,event:t})=>{e.assign({formRef:t.formRef}),e.raise({type:"RESET.STEP"})}))},"NAVIGATE.PREVIOUS":".Hist","NAVIGATE.START":".Start",LOADING:{actions:(0,x.a)((({event:e})=>({loading:{isLoading:e.isLoading,step:e.step,strategy:e.strategy,action:e.action}})))},RESET:".Idle"},states:{Idle:{on:{INIT:{actions:(0,x.a)((({event:e})=>{var t;const n=null==(t=e.router)?void 0:t.searchParams();return{clerk:e.clerk,router:e.router,signInPath:e.signInPath||a.q3,loading:{isLoading:!1},exampleMode:e.exampleMode||!1,formRef:e.formRef,ticket:(null==n?void 0:n.get(a.kj.ticket))||(null==n?void 0:n.get(a.kj.invitationToken))||void 0}})),target:"Init"}}},Init:{entry:(0,x.b)((({context:e,enqueue:t,self:n})=>{var r,i;n.getSnapshot().children[a.AG]||t.spawnChild("thirdPartyMachine",{id:a.AG,systemId:a.AG,input:{basePath:null!=(i=null==(r=e.router)?void 0:r.basePath)?i:a.ii,flow:"signUp",formRef:e.formRef,parent:n}})})),always:[{guard:"isLoggedInAndSingleSession",actions:[(0,x.l)("Already logged in"),{type:"navigateExternal",params:({context:e})=>{var t;return{path:(null==(t=e.router)?void 0:t.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl()}}}]},{guard:"needsCallback",target:"Callback"},{guard:"hasTicket",actions:{type:"navigateInternal",params:{force:!0,path:"/"}},target:"Start"},{guard:"needsVerification",actions:{type:"navigateInternal",params:{force:!0,path:"/verify"}},target:"Verification"},{guard:(0,p.G)(["needsContinue","hasClerkTransfer"]),actions:{type:"navigateInternal",params:{force:!0,path:"/continue"}},target:"Continue"},{guard:"isRestrictedWithoutTicket",target:"Restricted"},{actions:{type:"navigateInternal",params:{force:!0,path:"/"}},target:"Start"}]},Start:{tags:["step:start"],exit:"clearFormErrors",invoke:{id:"start",src:"startMachine",input:({context:e,self:t})=>{var n;return{basePath:null==(n=e.router)?void 0:n.basePath,formRef:e.formRef,parent:t,ticket:e.ticket}},onDone:{actions:"raiseNext"}},on:{"RESET.STEP":{actions:(0,x.b)((({enqueue:e,context:t})=>{e("clearFormErrors"),e.sendTo("start",{type:"SET_FORM",formRef:t.formRef})}))},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:(0,p.E)(["hasTicket","statusNeedsContinue"]),actions:{type:"navigateInternal",params:{path:"/"}},target:"Start",reenter:!0},{guard:"statusNeedsVerification",target:"Verification",actions:{type:"navigateInternal",params:{path:"/verify"}}},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"}]}},Continue:{tags:["step:continue"],invoke:{id:"continue",src:"continueMachine",input:({context:e,self:t})=>{var n;return{basePath:null==(n=e.router)?void 0:n.basePath,formRef:e.formRef,parent:t}},onDone:{actions:"raiseNext"}},on:{"RESET.STEP":{target:"Continue",reenter:!0},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:"statusNeedsVerification",target:"Verification",actions:{type:"navigateInternal",params:{path:"/verify"}}}]}},Verification:{tags:["step:verification"],invoke:{id:"verification",src:"verificationMachine",input:({context:e,self:t})=>{var n,r;return{attributes:null==(n=e.clerk.__unstable__environment)?void 0:n.userSettings.attributes,basePath:null==(r=e.router)?void 0:r.basePath,formRef:e.formRef,parent:t,resource:e.clerk.client.signUp}},onDone:{actions:"raiseNext"}},always:[{guard:"hasCreatedSession",actions:[({context:e})=>{var t;return{type:"setActive",params:{sessionId:null==(t=e.router)?void 0:t.searchParams().get(a.kj.createdSession)}}},"delayedReset"]},{guard:{type:"hasClerkStatus",params:{status:"verified"}},actions:{type:"navigateInternal",params:{force:!0,path:"/continue"}}},{guard:{type:"hasClerkStatus",params:{status:"expired"}},actions:{type:"navigateInternal",params:{force:!0,path:"/"}}}],on:{"RESET.STEP":{target:"Verification",reenter:!0},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"}]}},Callback:{tags:["step:callback"],entry:(0,x.c)(a.AG,{type:"CALLBACK"}),on:{NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{description:"Handle a case where the user has already been authenticated via ClerkJS",guard:"hasAuthenticatedViaClerkJS",actions:[{type:"setActive",params:{useLastActiveSession:!0}},"delayedReset"]},{guard:"statusNeedsVerification",actions:{type:"navigateInternal",params:{path:"/verify"}},target:"Verification"},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"},{actions:{type:"navigateInternal",params:{path:"/"}},target:"Start"}]}},Restricted:{tags:["step:restricted"],on:{NEXT:"Start"}},Error:{tags:["step:error"],on:{NEXT:{target:"Start",actions:"clearFormErrors"}}},Hist:{type:"history",exit:"clearFormErrors"}}}),P=(0,p.A)(U,{inspect:a.Nn});function I({children:e,exampleMode:t,fallback:n,isRootPath:r}){const i=(0,l.ho)(),o=(0,s.cb)(),d=(0,a.xt)(),p=(0,c.d4)(P,(e=>"Idle"!==e.value));return(0,u.useEffect)((()=>{if(!i||!o)return;const e=()=>{const e={type:"INIT",clerk:i,exampleMode:t,formRef:d,router:o,signInPath:a.q3};P.getSnapshot().can(e)&&P.send(e),d&&P.getSnapshot().can({type:"RESET.STEP"})&&P.send({type:"FORM.ATTACH",formRef:d})};"addOnLoaded"in i?i.addOnLoaded(e):e()}),[i,t,null==d?void 0:d.id,!!o,i.loaded]),(0,v.jsxs)(a.xm.Provider,{actorRef:P,children:[r&&!p&&n?(0,v.jsx)(a.lV,{children:n}):null,i.loaded&&p?e:null]})}function L({children:e,exampleMode:t=!1,fallback:n=null,path:r,routing:i=a.N_.path}){var c;const u=(0,l.ho)(),p=(0,o.CL)(),g=r||p||a.ii;null==(c=u.telemetry)||c.record((0,d.we)("Elements_SignUpRoot",{exampleMode:t,fallback:Boolean(n),path:g,routing:i}));const m=(i===a.N_.virtual?o.cY:s.SX)(),h=g===m.pathname();return(0,v.jsx)(s.Ix,{basePath:g,router:m,children:(0,v.jsx)(a.nF,{children:(0,v.jsx)(I,{exampleMode:t,fallback:n,isRootPath:h,children:e})})})}P.start();var M={start:"NAVIGATE.START",previous:"NAVIGATE.PREVIOUS"},F=u.forwardRef((({asChild:e,to:t,...n},r)=>{const i=a.xm.useActorRef(),s=e?E.DX:"button",o=e?{}:{type:"button"},l=u.useCallback((()=>{const e=M[t];i.getSnapshot().can({type:e})?i.send({type:e}):console.warn(`Clerk: <SignUp.Action navigate="${t}"> is an invalid navigation event. You can only navigate to: ${Object.keys(M).join(", ")}.`)}),[i,t]);return(0,v.jsx)(s,{...o,...n,onClick:l,ref:r})}));F.displayName="SignInNavigate";var w=u.forwardRef((({asChild:e,fallback:t,...n},r)=>{const i=a.pz.useActorRef(!0);if(!i)throw new Error('The resend action must be used within <SignUp.Step name="verifications">.');const s=(0,c.d4)(i,(e=>({resendable:e.context.resendable,resendableAfter:e.context.resendableAfter})),((e,t)=>e.resendableAfter===t.resendableAfter&&e.resendable===t.resendable));if(t&&!s.resendable)return"function"==typeof t?t(s):t;const o=e?E.DX:"button",l=e?{}:{type:"button"};return(0,v.jsx)(o,{...l,...n,disabled:!s.resendable,onClick:()=>i.send({type:"RETRY"}),ref:r})}));w.displayName="SignUpResend";var V=u.forwardRef(((e,t)=>{const{submit:n,navigate:r,resend:i,...s}=e;let o;return n?o=a.XT:r?o=F:i&&(o=w),o?(0,v.jsx)(o,{to:r,...s,ref:t}):null}));V.displayName="SignUpAction";var q=u.forwardRef((({asChild:e,children:t,...n},r)=>{if(!a.qk.useActorRef(!0))throw new a.X$('<Captcha> must be used within the <SignUp.Step name="start"> component.');const i=e?E.DX:"div";return(0,v.jsx)(i,{id:a.Wl,...n,ref:r})}));function B(e){const{t:t,translateError:n}=(0,i._R)();return(0,v.jsx)(a.D0,{name:"firstName",asChild:!0,children:(0,v.jsxs)(r.bL,{children:[(0,v.jsx)(a.JU,{asChild:!0,children:(0,v.jsxs)(r.JU,{children:[t("formFieldLabel__firstName")," ",(null==e?void 0:e.required)?null:(0,v.jsx)(r.Ck,{children:t("formFieldHintText__optional")})]})}),(0,v.jsx)(a.WK,{children:({state:t})=>(0,v.jsx)(a.pd,{type:"text",...e,asChild:!0,children:(0,v.jsx)(r.pd,{intent:t})})}),(0,v.jsx)(r.kh,{children:(0,v.jsx)(a.bg,{asChild:!0,children:({message:e,code:t})=>(0,v.jsx)(r.QB,{intent:"error",children:n({message:e,code:t,name:"first_name"})})})})]})})}function O(e){const{t:t,translateError:n}=(0,i._R)();return(0,v.jsx)(a.D0,{name:"lastName",asChild:!0,children:(0,v.jsxs)(r.bL,{children:[(0,v.jsx)(a.JU,{asChild:!0,children:(0,v.jsxs)(r.JU,{children:[t("formFieldLabel__lastName")," ",(null==e?void 0:e.required)?null:(0,v.jsx)(r.Ck,{children:t("formFieldHintText__optional")})]})}),(0,v.jsx)(a.WK,{children:({state:t})=>(0,v.jsx)(a.pd,{type:"text",...e,asChild:!0,children:(0,v.jsx)(r.pd,{intent:t})})}),(0,v.jsx)(r.kh,{children:(0,v.jsx)(a.bg,{asChild:!0,children:({message:e,code:t})=>(0,v.jsx)(r.QB,{intent:"error",children:n({message:e,code:t,name:"last_name"})})})})]})})}function D(){const e=(0,l.ho)(),{signInUrl:t}=(0,i.II)(),{t:n}=(0,i._R)(),{enabled:s,required:o}=(0,r.D7)("first_name"),{enabled:d,required:c}=(0,r.D7)("last_name"),{enabled:u,required:p}=(0,r.D7)("username"),{enabled:g,required:m}=(0,r.D7)("phone_number"),{enabled:h,required:f}=(0,r.D7)("password"),x=(0,r.iO)(),{logoProps:b,footerProps:E}=(0,r.mt)();return(0,v.jsx)(a.Rh,{scope:"global",children:l=>(0,v.jsx)(a.h7,{asChild:!0,name:"continue",children:(0,v.jsxs)(i.bL,{as:"form",banner:x?r.ey.developmentMode:null,children:[(0,v.jsxs)(i.UC,{children:[(0,v.jsxs)(i.Y9,{children:[(0,v.jsx)(i.gu,{...b}),(0,v.jsx)(i.hE,{children:n("signUp.continue.title")}),(0,v.jsx)(i.VY,{children:n("signUp.continue.subtitle")})]}),(0,v.jsx)(r.MR,{}),(0,v.jsx)(i.nB,{children:(0,v.jsxs)("div",{className:"cl-254f463f",children:[s&&d?(0,v.jsxs)("div",{className:"cl-e1e451e8",children:[(0,v.jsx)(B,{required:o,disabled:l}),(0,v.jsx)(O,{required:c,disabled:l})]}):null,u?(0,v.jsx)(r.Z5,{required:p,disabled:l}):null,g?(0,v.jsx)(r.wS,{required:m,disabled:l}):null,(0,v.jsx)(r.LP,{disabled:l}),h&&f?(0,v.jsx)(r.s3,{validatePassword:!0,label:n("formFieldLabel__password"),required:f,disabled:l}):null]})}),(0,v.jsx)(i.En,{children:(0,v.jsx)(a.Rh,{scope:"submit",children:e=>(0,v.jsx)(V,{submit:!0,asChild:!0,children:(0,v.jsx)(i.$n,{busy:e,disabled:l,iconEnd:(0,v.jsx)(r.bR,{}),children:n("formButtonPrimary")})})})})]}),(0,v.jsx)(i.wi,{...E,children:(0,v.jsx)(i.es,{children:(0,v.jsxs)(i.Nn,{children:[n("signUp.continue.actionText")," ",(0,v.jsx)(r.Wk,{asChild:!0,href:e.buildUrlWithAuth(t||"/sign-in"),children:(0,v.jsx)(i.sL,{children:n("signUp.continue.actionLink")})})]})})})]})})})}function X(){const e=(0,l.ho)(),{signInUrl:t}=(0,i.II)(),n=(0,i.sS)(),{userSettings:s}=(0,r.v3)(),{t:o}=(0,i._R)(),{required:d,show:c}=(0,r.N2)("first_name"),{required:u,show:p}=(0,r.N2)("last_name"),{enabled:g,required:m,show:h}=(0,r.N2)("username"),{enabled:f,required:x,show:b}=(0,r.N2)("phone_number"),{enabled:E,required:R,show:j}=(0,r.N2)("email_address"),{required:y,show:k}=(0,r.N2)("password"),{applicationName:S}=(0,r.S)(),T=n.length>0,A=E||g||f,C=(0,r.iO)(),{options:N}=(0,i.KP)().parsedAppearance,{logoProps:_,footerProps:U}=(0,r.mt)();return(0,v.jsx)(a.Rh,{scope:"global",children:n=>{const l=[(0,v.jsx)(i.UQ,{disabled:n},"connections"),T&&A?(0,v.jsx)(i.wv,{children:o("dividerText")},"separator"):null];return(0,v.jsx)(a.h7,{asChild:!0,name:"start",children:(0,v.jsxs)(i.bL,{as:"form",banner:C?r.ey.developmentMode:null,children:[(0,v.jsxs)(i.UC,{children:[(0,v.jsxs)(i.Y9,{children:[(0,v.jsx)(i.gu,{..._}),(0,v.jsx)(i.hE,{children:o("signUp.start.title")}),(0,v.jsx)(i.VY,{children:o("signUp.start.subtitle",{applicationName:S})})]}),(0,v.jsx)(r.MR,{}),(0,v.jsxs)(i.nB,{children:["top"===N.socialButtonsPlacement?l:null,A?(0,v.jsxs)("div",{className:"cl-7147c693",children:[c&&p?(0,v.jsxs)("div",{className:"cl-8a585078",children:[(0,v.jsx)(B,{required:d,disabled:n}),(0,v.jsx)(O,{required:u,disabled:n})]}):null,h?(0,v.jsx)(r.Z5,{required:m,disabled:n}):null,E&&!R&&f&&!x?(0,v.jsx)(r.HL,{toggleLabelEmail:o("signUp.start.actionLink__use_email"),toggleLabelPhoneNumber:o("signUp.start.actionLink__use_phone")}):(0,v.jsxs)(v.Fragment,{children:[j?(0,v.jsx)(r.LP,{disabled:n}):null,b?(0,v.jsx)(r.wS,{required:x,disabled:n,initPhoneWithCode:e.client.signUp.phoneNumber||""}):null]}),k?(0,v.jsx)(r.s3,{validatePassword:!0,label:o("formFieldLabel__password"),required:y,disabled:n}):null]}):null,"bottom"===N.socialButtonsPlacement?l.reverse():null,s.signUp.captcha_enabled?(0,v.jsx)(q,{className:"cl-7a09f230"}):null]}),T||A?(0,v.jsx)(i.En,{children:(0,v.jsx)(a.Rh,{scope:"submit",children:e=>(0,v.jsx)(V,{submit:!0,asChild:!0,children:(0,v.jsx)(i.$n,{busy:e,disabled:n,iconEnd:(0,v.jsx)(r.bR,{}),children:o("formButtonPrimary")})})})}):null]}),(0,v.jsx)(i.wi,{...U,children:(0,v.jsx)(i.es,{children:(0,v.jsxs)(i.Nn,{children:[o("signUp.start.actionText")," ",(0,v.jsx)(r.Wk,{asChild:!0,href:e.buildUrlWithAuth(t||"/sign-in"),children:(0,v.jsx)(i.sL,{children:o("signUp.start.actionLink")})})]})})})]})})}})}function W({emailAddress:e,phoneNumber:t}){const{client:n}=(0,l.ho)();if(e)return(0,v.jsx)("span",{children:n.signUp.emailAddress});if(t){const{formattedNumberWithCode:e}=(0,r.Xd)(n.signUp.phoneNumber||"");return(0,v.jsx)("span",{children:e})}return null}function Y(){const{t:e}=(0,i._R)(),{applicationName:t}=(0,r.S)(),n=(0,r.iO)(),{logoProps:s,footerProps:o}=(0,r.mt)();return(0,v.jsx)(a.Rh,{scope:"global",children:l=>(0,v.jsx)(a.h7,{asChild:!0,name:"verifications",children:(0,v.jsxs)(i.bL,{as:"form",banner:n?r.ey.developmentMode:null,children:[(0,v.jsxs)(i.UC,{children:[(0,v.jsxs)(a.Yj,{name:"phone_code",children:[(0,v.jsxs)(i.Y9,{children:[(0,v.jsx)(i.gu,{...s}),(0,v.jsx)(i.hE,{children:e("signUp.phoneCode.title")}),(0,v.jsx)(i.VY,{children:e("signUp.phoneCode.subtitle")}),(0,v.jsx)(i.VY,{children:(0,v.jsxs)("span",{className:"cl-6cb778e1",children:[(0,v.jsx)(W,{phoneNumber:!0}),(0,v.jsx)(V,{navigate:"start",asChild:!0,children:(0,v.jsx)("button",{type:"button",className:"cl-0f165050","aria-label":"Start again",children:(0,v.jsx)(r.Qh,{})})})]})})]}),(0,v.jsx)(r.MR,{}),(0,v.jsx)(i.nB,{children:(0,v.jsx)(r.K5,{label:e("signUp.phoneCode.formTitle"),disabled:l,resend:(0,v.jsx)(V,{asChild:!0,resend:!0,fallback:({resendableAfter:t})=>(0,v.jsxs)(r.z9,{type:"button",disabled:!0,children:[e("signUp.phoneCode.resendButton")," (",(0,v.jsx)("span",{className:"cl-ba2d0eea",children:t}),")"]}),children:(0,v.jsx)(r.z9,{type:"button",children:e("signUp.phoneCode.resendButton")})})})}),(0,v.jsx)(i.En,{children:(0,v.jsx)(a.Rh,{scope:"submit",children:t=>(0,v.jsx)(V,{submit:!0,asChild:!0,children:(0,v.jsx)(i.$n,{busy:t,disabled:l,iconEnd:(0,v.jsx)(r.bR,{}),children:e("formButtonPrimary")})})})})]}),(0,v.jsxs)(a.Yj,{name:"email_code",children:[(0,v.jsxs)(i.Y9,{children:[(0,v.jsx)(i.gu,{...s}),(0,v.jsx)(i.hE,{children:e("signUp.emailCode.title")}),(0,v.jsx)(i.VY,{children:e("signUp.emailCode.subtitle")}),(0,v.jsx)(i.VY,{children:(0,v.jsxs)("span",{className:"cl-6cb778e1",children:[(0,v.jsx)(W,{emailAddress:!0}),(0,v.jsx)(V,{navigate:"start",asChild:!0,children:(0,v.jsx)("button",{type:"button",className:"cl-0f165050","aria-label":"Start again",children:(0,v.jsx)(r.Qh,{})})})]})})]}),(0,v.jsx)(r.MR,{}),(0,v.jsx)(i.nB,{children:(0,v.jsx)(r.K5,{label:e("signUp.emailCode.formTitle"),disabled:l,resend:(0,v.jsx)(V,{asChild:!0,resend:!0,fallback:({resendableAfter:t})=>(0,v.jsxs)(r.z9,{type:"button",disabled:!0,children:[e("signUp.emailCode.resendButton")," (",(0,v.jsx)("span",{className:"cl-ba2d0eea",children:t}),")"]}),children:(0,v.jsx)(r.z9,{type:"button",children:e("signUp.emailCode.resendButton")})})})}),(0,v.jsx)(i.En,{children:(0,v.jsx)(a.Rh,{scope:"submit",children:t=>(0,v.jsx)(V,{submit:!0,asChild:!0,children:(0,v.jsx)(i.$n,{busy:t,disabled:l,iconEnd:(0,v.jsx)(r.bR,{}),children:e("formButtonPrimary")})})})})]}),(0,v.jsxs)(a.Yj,{name:"email_link",children:[(0,v.jsxs)(i.Y9,{children:[(0,v.jsx)(i.gu,{...s}),(0,v.jsx)(i.hE,{children:e("signUp.emailLink.title")}),(0,v.jsx)(i.VY,{children:e("signUp.emailLink.subtitle",{applicationName:t})}),(0,v.jsx)(i.VY,{children:(0,v.jsxs)("span",{className:"cl-6cb778e1",children:[(0,v.jsx)(W,{emailAddress:!0}),(0,v.jsx)(V,{navigate:"start",asChild:!0,children:(0,v.jsx)("button",{type:"button",className:"cl-0f165050","aria-label":"Start again",children:(0,v.jsx)(r.Qh,{})})})]})})]}),(0,v.jsx)(r.MR,{}),(0,v.jsx)(i.nB,{children:(0,v.jsx)(V,{resend:!0,asChild:!0,fallback:({resendableAfter:t})=>(0,v.jsxs)(r.z9,{type:"button",disabled:!0,children:[e("signUp.emailLink.resendButton"),"(",(0,v.jsx)("span",{className:"cl-ba2d0eea",children:t}),")"]}),children:(0,v.jsx)(r.z9,{type:"button",children:e("signUp.emailLink.resendButton")})})})]})]}),(0,v.jsx)(i.wi,{...o})]})})})}function G({appearance:e,...t}){var n;const r=(null==(n=t.__experimental)?void 0:n.newComponents)?t.__experimental.appearance:e;return(0,v.jsx)(i.Qy,{appearance:r,children:(0,v.jsxs)(L,{...t,children:[(0,v.jsx)(X,{}),(0,v.jsx)(Y,{}),(0,v.jsx)(D,{})]})})}}}]);