"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[837],{8864:function(e,i,o){o.r(i),o.d(i,{OrganizationProfile:function(){return ve},OrganizationProfileModal:function(){return fe}});var n=o(4380),a=o(3931),t=o(4041),r=o(844),l=o(9333),s=o(8369),d=o(166),c=o(7362),m=o(2237),g=o(9513);const u=e=>{const{organization:i}=(0,a.Z5)(),{pages:o}=(0,r.useOrganizationProfileContext)(),t=(0,c.Fd)((e=>e({permission:"org:sys_memberships:read"})||e({permission:"org:sys_memberships:manage"})));return i?(0,n.FD)(s.NavbarContextProvider,{children:[(0,n.Y)(s.NavBar,{title:(0,g.GQ)("organizationProfile.navbar.title"),description:(0,g.GQ)("organizationProfile.navbar.description"),routes:o.routes.filter((e=>e.id!==m.jc.MEMBERS||e.id===m.jc.MEMBERS&&t)),contentRef:e.contentRef}),e.children]}):null};var p=o(9834),h=o(3090),v=o(2572),f=o(9927),z=o(4683);const b=e=>{const i=(0,s.useCardState)(),{navigateAfterLeaveOrganization:o}=(0,r.useOrganizationProfileContext)(),{userMemberships:n,userInvitations:t}=(0,a.D_)({userMemberships:z.mu.userMemberships,userInvitations:z.mu.userInvitations});return()=>i.runAsync((async()=>{await(null==e?void 0:e())})).then((()=>{var e,i;null===(e=n.revalidate)||void 0===e||e.call(n),null===(i=t.revalidate)||void 0===i||i.call(t),o()}))},P=e=>{const{organization:i}=(0,a.Z5)(),{user:o}=(0,a.Jd)(),t=b((()=>o.leaveOrganization(i.id)));return i&&o?(0,n.Y)(y,{organizationName:null==i?void 0:i.name,title:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),messageLine1:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.messageLine1"),messageLine2:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.messageLine2"),actionDescription:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.actionDescription",{organizationName:null==i?void 0:i.name}),submitLabel:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),successMessage:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.successMessage"),onConfirmation:t,...e}):null},Y=e=>{const{organization:i,membership:o}=(0,a.Z5)(),t=b(null==i?void 0:i.destroy);return i&&o?(0,n.Y)(y,{organizationName:null==i?void 0:i.name,title:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),messageLine1:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.messageLine1"),messageLine2:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.messageLine2"),actionDescription:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.actionDescription",{organizationName:null==i?void 0:i.name}),submitLabel:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),successMessage:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.successMessage"),onConfirmation:t,...e}):null},y=(0,s.withCardStateProvider)((e=>{const{title:i,messageLine1:o,messageLine2:a,actionDescription:t,organizationName:r,successMessage:d,submitLabel:m,onSuccess:g,onReset:u,onConfirmation:p,colorScheme:h="danger"}=e,v=(0,c.Xi)(),z=(0,s.useCardState)(),b=(0,f.tJ)("deleteOrganizationConfirmation","",{type:"text",label:t||(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.actionDescription"),isRequired:!0,placeholder:r}),P=!t||b.value===r;return(0,n.FD)(c.sQ,{...v.props,children:[(0,n.Y)(s.FormContainer,{headerTitle:i,gap:1,children:(0,n.FD)(s.Form.Root,{onSubmit:async()=>{if(P)try{await p().then((()=>v.nextStep()))}catch(e){(0,f.H4)(e,[],z.setError)}},children:[(0,n.FD)(l.Col,{children:[(0,n.Y)(l.Text,{localizationKey:o,colorScheme:"secondary"}),(0,n.Y)(l.Text,{localizationKey:a,colorScheme:"danger"})]}),(0,n.Y)(s.Form.ControlRow,{elementId:b.id,children:(0,n.Y)(s.Form.PlainInput,{...b.props})}),(0,n.FD)(s.FormButtonContainer,{children:[(0,n.Y)(s.Form.SubmitButton,{block:!1,colorScheme:h,localizationKey:m,isDisabled:!P}),(0,n.Y)(s.Form.ResetButton,{localizationKey:(0,l.localizationKeys)("userProfile.formButtonReset"),block:!1,onClick:u})]})]})}),(0,n.Y)(s.SuccessPage,{title:i,text:d,onFinish:g})]})}));var S=o(5909),D=o(8313);const _=(0,s.withCardStateProvider)((e=>{const{domainId:i,mode:o="edit",onSuccess:d,onReset:m}=e,g=(0,s.useCardState)(),{organizationSettings:u}=(0,r.useEnvironment)(),{membership:p,organization:h,domains:v}=(0,a.Z5)({domains:{infinite:!0}}),z="edit"===o,b=(()=>{const{organizationSettings:e}=(0,r.useEnvironment)();return(e=>{const i=[];return e.domains.enrollmentModes.includes("manual_invitation")&&i.push({value:"manual_invitation",label:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.manualInvitationOption__label"),description:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.manualInvitationOption__description")}),e.domains.enrollmentModes.includes("automatic_invitation")&&i.push({value:"automatic_invitation",label:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticInvitationOption__label"),description:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticInvitationOption__description")}),e.domains.enrollmentModes.includes("automatic_suggestion")&&i.push({value:"automatic_suggestion",label:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticSuggestionOption__label"),description:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.automaticSuggestionOption__description")}),i})(e)})(),P=(0,f.tJ)("enrollmentMode","",{type:"radio",radioOptions:b,isRequired:!0}),Y=(0,f.tJ)("deleteExistingInvitationsSuggestions","",{label:(0,l.localizationKeys)("formFieldLabel__organizationDomainDeletePending"),type:"checkbox"}),{data:y,isLoading:_}=(0,S.st)(null==h?void 0:h.getDomain,{domainId:i});(0,t.useEffect)((()=>{y&&P.setValue(y.enrollmentMode)}),[null==y?void 0:y.id]);const C=(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.title",{domain:null==y?void 0:y.name}),x=(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.subtitle",{domain:null==y?void 0:y.name}),F=((e,{infoLabel:i})=>{const o=(null==e?void 0:e.totalPendingInvitations)||0;return 0===((null==e?void 0:e.totalPendingSuggestions)||0)+o?[]:[i,(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.calloutInvitationCountLabel",{count:o}),(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.calloutSuggestionCountLabel",{count:o})]})(y,{infoLabel:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.calloutInfoLabel")});return h&&u?_||!y?(0,n.Y)(l.Flex,{direction:"row",align:"center",justify:"center",sx:{height:"100%"},children:(0,n.Y)(l.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:l.descriptors.spinner})}):(y.verification&&"verified"===y.verification.status||m(),(0,n.Y)(s.FormContainer,{headerTitle:C,headerSubtitle:z?void 0:x,gap:4,children:(0,n.FD)(l.Col,{gap:6,children:[F.length>0&&(0,n.Y)(c.DD,{icon:D.Vk,children:F.map(((e,i)=>(0,n.Y)(l.Text,{as:"span",sx:{display:"block"},localizationKey:e},i)))}),(0,n.Y)(s.Header.Root,{children:(0,n.Y)(s.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("organizationProfile.verifiedDomainPage.enrollmentTab.subtitle"),variant:"subtitle"})}),(0,n.FD)(s.Form.Root,{onSubmit:async()=>{if(y&&h&&p&&v)try{await y.updateEnrollmentMode({enrollmentMode:P.value,deletePending:Y.checked}),await v.revalidate(),d()}catch(e){(0,f.H4)(e,[P],g.setError)}},gap:6,children:[(0,n.Y)(s.Form.ControlRow,{elementId:P.id,children:(0,n.Y)(s.Form.RadioGroup,{...P.props})}),z&&"manual_invitation"===P.value&&(0,n.Y)(s.Form.ControlRow,{elementId:Y.id,children:(0,n.Y)(s.Form.Checkbox,{...Y.props})}),(0,n.Y)(s.FormButtons,{isDisabled:_||!y,onReset:m})]})]})})):null})),C=(0,s.withCardStateProvider)((e=>{var i;const{domainId:o,onSuccess:d,onReset:m,skipToVerified:g}=e,u=(0,s.useCardState)(),{organizationSettings:p}=(0,r.useEnvironment)(),{organization:h}=(0,a.Z5)(),{data:v,isLoading:z}=(0,S.st)(g||null==h?void 0:h.getDomain,{domainId:o}),b=(0,l.localizationKeys)("organizationProfile.verifyDomainPage.title"),P=(0,l.localizationKeys)("organizationProfile.verifyDomainPage.subtitle",{domainName:null!==(i=null==v?void 0:v.name)&&void 0!==i?i:""}),Y=(0,c.Xi)({defaultStep:g?2:0,onNextStep:()=>u.setError(void 0)}),y=(0,f.tJ)("affiliationEmailAddress","",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__organizationDomainEmailAddress"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__organizationDomainEmailAddress"),infoText:(0,l.localizationKeys)("formFieldLabel__organizationDomainEmailAddressDescription"),isRequired:!0}),D=(0,t.useRef)(),C=(0,l.localizationKeys)("organizationProfile.verifyDomainPage.subtitleVerificationCodeScreen",{emailAddress:D.current}),x=(0,s.useFieldOTP)({onCodeEntryFinished:(e,i,o)=>{((e,i,o)=>{var n;null===(n=null==v?void 0:v.attemptAffiliationVerification)||void 0===n||n.call(v,{code:e}).then((async e=>{var o;await i(),"verified"===(null===(o=e.verification)||void 0===o?void 0:o.status)?Y.nextStep():null==d||d()})).catch((e=>o(e)))})(e,i,o)},onResendCodeClicked:()=>{null==v||v.prepareAffiliationVerification({affiliationEmailAddress:y.value}).catch((e=>{(0,f.H4)(e,[y],u.setError)}))}});if(!h||!p)return null;const F=h.name!==y.value,K=`@${null==v?void 0:v.name}`;return!z&&v||g?(0,n.FD)(c.sQ,{...Y.props,children:[(0,n.Y)(s.FormContainer,{headerTitle:b,headerSubtitle:P,children:(0,n.FD)(s.Form.Root,{onSubmit:e=>{if(e.preventDefault(),v)return D.current=`${y.value}${K}`,v.prepareAffiliationVerification({affiliationEmailAddress:D.current}).then(Y.nextStep).catch((e=>{(0,f.H4)(e,[y],u.setError)}))},children:[(0,n.Y)(s.Form.ControlRow,{elementId:y.id,children:(0,n.Y)(s.Form.InputGroup,{...y.props,autoFocus:!0,groupSuffix:K,ignorePasswordManager:!0})}),(0,n.Y)(s.FormButtons,{isDisabled:!F,onReset:m})]})}),(0,n.FD)(s.FormContainer,{headerTitle:b,headerSubtitle:C,children:[(0,n.Y)(s.Form.OTPInput,{...x,label:(0,l.localizationKeys)("organizationProfile.verifyDomainPage.formTitle"),description:(0,l.localizationKeys)("organizationProfile.verifyDomainPage.formSubtitle"),resendButton:(0,l.localizationKeys)("organizationProfile.verifyDomainPage.resendButton")}),(0,n.Y)(s.FormButtonContainer,{children:(0,n.Y)(l.Button,{elementDescriptor:l.descriptors.formButtonReset,block:!1,variant:"ghost",textVariant:"buttonSmall",type:"reset",isDisabled:x.isLoading||"success"===x.otpControl.otpInputProps.feedbackType,onClick:()=>{x.otpControl.otpInputProps.clearFeedback(),x.otpControl.reset(),Y.prevStep()},localizationKey:(0,l.localizationKeys)("userProfile.formButtonReset")})})]}),(0,n.Y)(_,{domainId:o,mode:"select",onSuccess:d,onReset:m})]}):(0,n.Y)(l.Flex,{direction:"row",align:"center",justify:"center",children:(0,n.Y)(l.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:l.descriptors.spinner})})})),x=(0,s.withCardStateProvider)((e=>{const{onSuccess:i,onReset:o}=e,{organizationSettings:d}=(0,r.useEnvironment)(),{domains:m}=(0,a.Z5)({domains:{infinite:!0}}),g=(0,c.Xi)({onNextStep:()=>P.setError(void 0)}),[u,p]=(0,t.useState)(""),[h,v]=(0,t.useState)(!1),z=(0,l.localizationKeys)("organizationProfile.createDomainPage.title"),b=(0,l.localizationKeys)("organizationProfile.createDomainPage.subtitle"),P=(0,s.useCardState)(),{organization:Y}=(0,a.Z5)(),y=(0,f.tJ)("name","",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__organizationDomain"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__organizationDomain")});if(!Y||!d)return null;const S=""!==y.value.trim();return(0,n.FD)(c.sQ,{...g.props,children:[(0,n.Y)(s.FormContainer,{headerTitle:z,headerSubtitle:b,children:(0,n.FD)(s.Form.Root,{onSubmit:e=>(y.clearFeedback(),e.preventDefault(),Y.createDomain(y.value).then((async e=>{var i;p(e.id),null===(i=null==m?void 0:m.revalidate)||void 0===i||i.call(m),e.verification&&"verified"===e.verification.status&&v(!0),g.nextStep()})).catch((e=>{(0,f.H4)(e,[y],P.setError)}))),children:[(0,n.Y)(s.Form.ControlRow,{elementId:y.id,children:(0,n.Y)(s.Form.PlainInput,{...y.props,autoFocus:!0,ignorePasswordManager:!0,isRequired:!0})}),(0,n.Y)(s.FormButtons,{isDisabled:!S,onReset:o})]})}),(0,n.Y)(C,{domainId:u,onSuccess:()=>{var e;null===(e=null==m?void 0:m.revalidate)||void 0===e||e.call(m),null==i||i()},skipToVerified:h,onReset:o})]})})),F={manual_invitation:(0,l.localizationKeys)("organizationProfile.badge__manualInvitation"),automatic_invitation:(0,l.localizationKeys)("organizationProfile.badge__automaticInvitation"),automatic_suggestion:(0,l.localizationKeys)("organizationProfile.badge__automaticSuggestion")},K=e=>{const{organizationDomain:i}=e;return i?i.verification&&"verified"===i.verification.status?(0,n.Y)(l.Badge,{localizationKey:F[i.enrollmentMode],colorScheme:"manual_invitation"===i.enrollmentMode?"primary":"success"}):(0,n.Y)(l.Badge,{localizationKey:(0,l.localizationKeys)("organizationProfile.badge__unverified"),colorScheme:"warning"}):null},T=e=>{var i;const{organizationSettings:o}=(0,r.useEnvironment)(),{organization:s}=(0,a.Z5)(),{domainId:d,onSuccess:m,onReset:u}=e,p=t.useRef(),{data:h,isLoading:v}=(0,S.st)(null==s?void 0:s.getDomain,{domainId:d},{onSuccess(e){p.current={...e}}}),{domains:f}=(0,a.Z5)({domains:{infinite:!0}});return s&&o?v||!h?(0,n.Y)(l.Flex,{direction:"row",align:"center",justify:"center",children:(0,n.Y)(l.Spinner,{size:"lg",colorScheme:"primary",elementDescriptor:l.descriptors.spinner})}):(0,n.Y)(c.P_,{title:(0,g.GQ)("organizationProfile.removeDomainPage.title"),messageLine1:(0,g.GQ)("organizationProfile.removeDomainPage.messageLine1",{domain:null===(i=p.current)||void 0===i?void 0:i.name}),messageLine2:(0,g.GQ)("organizationProfile.removeDomainPage.messageLine2"),deleteResource:()=>null==h?void 0:h.delete().then((async()=>{var e;await(null===(e=null==f?void 0:f.revalidate)||void 0===e?void 0:e.call(f)),m()})),onSuccess:m,onReset:u}):null},R=e=>{const{close:i}=(0,v.D5)();return(0,n.Y)(T,{onSuccess:i,onReset:i,...e})},w=e=>{const{close:i}=(0,v.D5)();return(0,n.Y)(_,{onSuccess:i,onReset:i,...e})},L=e=>{const{close:i}=(0,v.D5)();return(0,n.Y)(C,{onSuccess:i,onReset:i,skipToVerified:!1,...e})},I=({domain:e})=>{const i=(e=>{const{open:i}=(0,v.D5)(),o=[];return e.verification&&"verified"===e.verification.status?o.push({label:(0,l.localizationKeys)("organizationProfile.profilePage.domainSection.menuAction__manage"),onClick:()=>i("manage")}):o.push({label:(0,l.localizationKeys)("organizationProfile.profilePage.domainSection.menuAction__verify"),onClick:()=>i("verify")}),o.push({label:(0,l.localizationKeys)("organizationProfile.profilePage.domainSection.menuAction__remove"),isDestructive:!0,onClick:()=>i("remove")}),o})(e);return(0,n.Y)(s.ThreeDotsMenu,{actions:i})},$=(0,c.cb)((e=>{const{verificationStatus:i,enrollmentMode:o,fallback:r,...d}=e,{organization:m,domains:g}=(0,a.Z5)({domains:{infinite:!0,...d}}),{ref:u}=(0,S.Wx)({threshold:0,onChange:e=>{var i;e&&(null===(i=null==g?void 0:g.fetchNext)||void 0===i||i.call(g))}}),p=(0,t.useMemo)((()=>(null==g?void 0:g.data)?g.data.filter((e=>{let n=!0,a=!0;return i&&(n=!!e.verification&&e.verification.status===i),o&&(a=e.enrollmentMode===o),n&&a})):[]),[null==g?void 0:g.data]);if(!m)return null;const v=(null==g?void 0:g.hasNextPage)||(null==g?void 0:g.isFetching);return 0!==p.length||(null==g?void 0:g.isLoading)||r?(0,n.FD)(s.ProfileSection.ItemList,{id:"organizationDomains",children:[0===p.length&&!(null==g?void 0:g.isLoading)&&r,p.map((e=>(0,n.FD)(h.r.Root,{children:[(0,n.FD)(s.ProfileSection.Item,{id:"organizationDomains",hoverable:!0,children:[(0,n.FD)(l.Flex,{sx:e=>({gap:e.space.$1}),children:[(0,n.Y)(l.Text,{children:e.name}),(0,n.Y)(K,{organizationDomain:e})]}),(0,n.Y)(c.EH,{permission:"org:sys_domains:manage",children:(0,n.Y)(I,{domain:e})})]}),(0,n.Y)(h.r.Open,{value:"remove",children:(0,n.Y)(h.r.Card,{variant:"destructive",children:(0,n.Y)(R,{domainId:e.id})})}),(0,n.Y)(h.r.Open,{value:"verify",children:(0,n.Y)(h.r.Card,{children:(0,n.Y)(L,{domainId:e.id})})}),(0,n.Y)(h.r.Open,{value:"manage",children:(0,n.Y)(h.r.Card,{children:(0,n.Y)(w,{domainId:e.id})})})]},e.id))),(0,n.Y)(l.Box,{ref:(null==g?void 0:g.hasNextPage)&&!g.isFetching?u:void 0,sx:{visibility:"hidden"}}),v&&0===g.data.length&&(0,n.Y)(l.Box,{sx:[e=>({width:"100%",height:e.space.$10,position:"relative"})],children:(0,n.Y)(l.Box,{sx:{display:"flex",margin:"auto",position:"absolute",left:"50%",top:"50%",transform:"translateY(-50%) translateX(-50%)"},children:(0,n.Y)(l.Spinner,{size:"sm",colorScheme:"primary",elementDescriptor:l.descriptors.spinner})})})]}):null}),{permission:"org:sys_domains:read"});var B=o(4870),M=o(699);const k=(0,s.withCardStateProvider)((e=>{const{onSuccess:i,onReset:o}=e,t=(0,l.localizationKeys)("organizationProfile.profilePage.title"),r=(0,s.useCardState)(),{organization:d}=(0,a.Z5)(),c=(0,f.tJ)("name",(null==d?void 0:d.name)||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__organizationName"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__organizationName")}),m=(0,f.tJ)("slug",(null==d?void 0:d.slug)||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__organizationSlug"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__organizationSlug")});if(!d)return null;const g=(d.name!==c.value||d.slug!==m.value)&&"error"!==m.feedbackType;return(0,n.Y)(s.FormContainer,{headerTitle:t,children:(0,n.FD)(s.Form.Root,{onSubmit:async e=>(e.preventDefault(),(g?d.update({name:c.value,slug:m.value}):Promise.resolve()).then(i).catch((e=>{(0,f.H4)(e,[c,m],r.setError)}))),children:[(0,n.Y)(M.i,{organization:d,onAvatarChange:e=>d.setLogo({file:e}).then((()=>{r.setIdle()})).catch((e=>(0,f.H4)(e,[],r.setError))),onAvatarRemove:(0,B.px)(d.imageUrl)?null:()=>{d.setLogo({file:null}).then((()=>{r.setIdle()})).catch((e=>(0,f.H4)(e,[],r.setError)))}}),(0,n.Y)(s.Form.ControlRow,{elementId:c.id,children:(0,n.Y)(s.Form.PlainInput,{...c.props,autoFocus:!0,isRequired:!0,ignorePasswordManager:!0})}),(0,n.Y)(s.Form.ControlRow,{elementId:m.id,children:(0,n.Y)(s.Form.PlainInput,{...m.props,onChange:e=>{var i;i=e.target.value,m.setValue(i),m.clearFeedback()},ignorePasswordManager:!0})}),(0,n.Y)(s.FormButtons,{isDisabled:!g,onReset:o})]})})})),E=()=>{const{close:e}=(0,v.D5)();return(0,n.Y)(k,{onSuccess:e,onReset:e})},O=()=>{const{close:e}=(0,v.D5)();return(0,n.Y)(x,{onSuccess:e,onReset:e})},A=()=>{const{close:e}=(0,v.D5)();return(0,n.Y)(P,{onSuccess:e,onReset:e})},H=()=>{const{close:e}=(0,v.D5)();return(0,n.Y)(Y,{onSuccess:e,onReset:e})},q=()=>(0,n.Y)(l.Col,{elementDescriptor:l.descriptors.page,sx:e=>({gap:e.space.$8}),children:(0,n.FD)(l.Col,{elementDescriptor:l.descriptors.profilePage,elementId:l.descriptors.profilePage.setId("organizationGeneral"),children:[(0,n.Y)(s.Header.Root,{children:(0,n.Y)(s.Header.Title,{localizationKey:(0,l.localizationKeys)("organizationProfile.start.headerTitle__general"),sx:e=>({marginBottom:e.space.$4}),textVariant:"h2"})}),(0,n.Y)(V,{}),(0,n.Y)(c.EH,{permission:"org:sys_domains:read",children:(0,n.Y)(Z,{})}),(0,n.Y)(j,{}),(0,n.Y)(N,{})]})}),V=()=>{const{organization:e}=(0,a.Z5)();if(!e)return null;const i=(0,n.Y)(s.OrganizationPreview,{size:"lg",mainIdentifierVariant:"subtitle",organization:e});return(0,n.Y)(s.ProfileSection.Root,{title:(0,l.localizationKeys)("organizationProfile.start.profileSection.title"),id:"organizationProfile",children:(0,n.FD)(h.r.Root,{children:[(0,n.Y)(c.EH,{permission:"org:sys_profile:manage",fallback:i,children:(0,n.Y)(h.r.Closed,{value:"edit",children:(0,n.FD)(s.ProfileSection.Item,{id:"organizationProfile",children:[i,(0,n.Y)(h.r.Trigger,{value:"edit",children:(0,n.Y)(s.ProfileSection.Button,{id:"organizationProfile",localizationKey:(0,l.localizationKeys)("organizationProfile.start.profileSection.primaryButton")})})]})})}),(0,n.Y)(h.r.Open,{value:"edit",children:(0,n.Y)(h.r.Card,{children:(0,n.Y)(E,{})})})]})})},Z=()=>{const{organizationSettings:e}=(0,r.useEnvironment)(),{organization:i}=(0,a.Z5)();return e&&i&&e.domains.enabled?(0,n.Y)(s.ProfileSection.Root,{title:(0,l.localizationKeys)("organizationProfile.profilePage.domainSection.title"),id:"organizationDomains",centered:!1,children:(0,n.FD)(h.r.Root,{children:[(0,n.Y)($,{}),(0,n.FD)(c.EH,{permission:"org:sys_domains:manage",children:[(0,n.Y)(h.r.Trigger,{value:"add",children:(0,n.FD)(l.Col,{children:[(0,n.Y)(s.ProfileSection.ArrowButton,{localizationKey:(0,l.localizationKeys)("organizationProfile.profilePage.domainSection.primaryButton"),id:"organizationDomains"}),(0,n.Y)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.profilePage.domainSection.subtitle"),sx:e=>({paddingLeft:e.space.$9}),colorScheme:"secondary"})]})}),(0,n.Y)(h.r.Open,{value:"add",children:(0,n.Y)(h.r.Card,{children:(0,n.Y)(O,{})})})]})]})}):null},j=()=>{const{organization:e}=(0,a.Z5)();return e?(0,n.Y)(s.ProfileSection.Root,{id:"organizationDanger",title:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),children:(0,n.FD)(h.r.Root,{children:[(0,n.Y)(h.r.Closed,{value:"leave",children:(0,n.Y)(s.ProfileSection.Item,{sx:e=>({paddingTop:0,paddingBottom:0,paddingLeft:e.space.$1}),id:"organizationDanger",children:(0,n.Y)(h.r.Trigger,{value:"leave",children:(0,n.Y)(s.ProfileSection.Button,{id:"organizationDanger",variant:"ghost",colorScheme:"danger",textVariant:"buttonLarge",localizationKey:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title")})})})}),(0,n.Y)(h.r.Open,{value:"leave",children:(0,n.Y)(h.r.Card,{variant:"destructive",children:(0,n.Y)(A,{})})})]})}):null},N=()=>{const{organization:e}=(0,a.Z5)(),i=(0,c.Fd)({permission:"org:sys_profile:delete"});if(!e)return null;const o=e.adminDeleteEnabled;return i&&o?(0,n.Y)(s.ProfileSection.Root,{id:"organizationDanger",title:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),sx:e=>({marginBottom:e.space.$4}),children:(0,n.FD)(h.r.Root,{children:[(0,n.Y)(h.r.Closed,{value:"delete",children:(0,n.Y)(s.ProfileSection.Item,{sx:e=>({paddingTop:0,paddingBottom:0,paddingLeft:e.space.$1}),id:"organizationDanger",children:(0,n.Y)(h.r.Trigger,{value:"delete",children:(0,n.Y)(s.ProfileSection.Button,{id:"organizationDanger",variant:"ghost",colorScheme:"danger",textVariant:"buttonLarge",localizationKey:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title")})})})}),(0,n.Y)(h.r.Open,{value:"delete",children:(0,n.Y)(h.r.Card,{variant:"destructive",children:(0,n.Y)(H,{})})})]})}):null};var G=o(3965),U=o(3803),Q=o(3209),W=o(2596);const J={memberships:{pageSize:10,keepPreviousData:!0}},X=()=>{const e=(0,s.useCardState)(),{organization:i,memberships:o}=(0,a.Z5)(J),{options:t,isLoading:r}=(0,Q.x)();if(!i)return null;const d=i=>async()=>e.runAsync((async()=>{var e;const n=await i.destroy();return await(null===(e=null==o?void 0:o.revalidate)||void 0===e?void 0:e.call(o)),n})).catch((i=>(0,f.H4)(i,[],e.setError)));return(0,n.Y)(W.bQ,{page:(null==o?void 0:o.page)||1,onPageChange:e=>{var i;return null===(i=null==o?void 0:o.fetchPage)||void 0===i?void 0:i.call(o,e)},itemCount:(null==o?void 0:o.count)||0,pageCount:(null==o?void 0:o.pageCount)||0,itemsPerPage:J.memberships.pageSize,isLoading:(null==o?void 0:o.isLoading)||r,emptyStateLocalizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.detailsTitle__emptyRow"),headers:[(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__joined"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__role"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:((null==o?void 0:o.data)||[]).map((i=>{return(0,n.Y)(ee,{membership:i,options:t,onRoleChange:(o=i,i=>e.runAsync((()=>o.update({role:i}))).catch((i=>(0,f.H4)(i,[],e.setError)))),onRemove:d(i)},i.id);var o}))})},ee=e=>{var i;const{membership:o,onRemove:t,onRoleChange:r,options:d}=e,{localizeCustomRole:c}=(0,Q.l)(),m=(0,s.useCardState)(),{user:g}=(0,a.Jd)(),u=(null==g?void 0:g.id)===o.publicUserData.userId,p=null===(i=null==d?void 0:d.find((e=>e.value===o.role)))||void 0===i?void 0:i.label;return(0,n.FD)(W.Yq,{children:[(0,n.Y)(l.Td,{children:(0,n.Y)(s.UserPreview,{sx:{maxWidth:"30ch"},user:o.publicUserData,subtitle:o.publicUserData.identifier,badge:u&&(0,n.Y)(l.Badge,{localizationKey:(0,l.localizationKeys)("badge__you")})})}),(0,n.Y)(l.Td,{children:(0,n.Y)(l.Box,{as:"span",elementDescriptor:l.descriptors.formattedDate,elementId:l.descriptors.formattedDate.setId("tableCell"),children:o.createdAt.toLocaleDateString()})}),(0,n.Y)(l.Td,{children:(0,n.Y)(U.EH,{permission:"org:sys_memberships:manage",fallback:(0,n.Y)(l.Text,{sx:e=>({opacity:e.opacity.$inactive}),children:c(o.role)||p}),children:(0,n.Y)(W.Vo,{isDisabled:m.isLoading||!r,value:o.role,onChange:r,roles:d})})}),(0,n.Y)(l.Td,{children:(0,n.Y)(U.EH,{permission:"org:sys_memberships:manage",children:(0,n.Y)(s.ThreeDotsMenu,{actions:[{label:(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.menuAction__remove"),isDestructive:!0,onClick:t,isDisabled:u}],elementId:"member"})})})]})};var ie=o(2622);const oe=()=>{const e=(0,c.Fd)({permission:"org:sys_memberships:manage"});return(0,n.FD)(h.r.Root,{animate:!1,children:[(0,n.Y)(s.Animated,{asChild:!0,children:(0,n.Y)(l.Flex,{justify:"end",sx:e=>({width:"100%",marginLeft:"auto",padding:`${e.space.$none} ${e.space.$1}`}),children:e&&(0,n.Y)(h.r.Trigger,{value:"invite",children:(0,n.Y)(l.Button,{elementDescriptor:l.descriptors.membersPageInviteButton,"aria-label":"Invite",textVariant:"buttonSmall",localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.action__invite")})})})}),e&&(0,n.Y)(s.Animated,{children:(0,n.Y)(h.r.Open,{value:"invite",children:(0,n.Y)(l.Flex,{sx:e=>({paddingBottom:e.space.$6,padding:`${e.space.$none} ${e.space.$1} ${e.space.$6} ${e.space.$1}`}),children:(0,n.Y)(h.r.Card,{sx:{width:"100%"},children:(0,n.Y)(ie.D,{})})})})})]})},ne=()=>{const{organization:e}=(0,a.Z5)(),{__unstable_manageBillingUrl:i,__unstable_manageBillingLabel:o,__unstable_manageBillingMembersLimit:t}=(0,r.useOrganizationProfileContext)(),c=(0,d.useRouter)();if(!e)return null;const m=(null==e?void 0:e.membersCount)+(null==e?void 0:e.pendingInvitationsCount),g=(0,B.Mo)(t);return(0,n.Y)(l.Flex,{sx:e=>({background:e.colors.$neutralAlpha50,padding:e.space.$2,borderRadius:e.radii.$md,gap:e.space.$4}),children:(0,n.FD)(l.Flex,{align:"center",sx:e=>({[G.mqu.sm]:{gap:e.space.$3},gap:e.space.$2}),children:[g>0&&(0,n.Y)(s.Gauge,{limit:g,value:m,size:"xs"}),(0,n.FD)(l.Flex,{sx:e=>({[G.mqu.sm]:{flexDirection:"column"},gap:e.space.$0x5}),children:[(0,n.FD)(l.Text,{children:["You can invite ",t?`up to ${g}`:"unlimited"," members."]}),g>0&&(0,n.FD)(l.Link,{sx:e=>({fontWeight:e.fontWeights.$medium}),variant:"body",onClick:()=>c.navigate((0,B.Mo)(i)),children:[(0,B.Mo)(o)||"Manage billing",(0,n.Y)(l.Icon,{icon:D.fl})]})]})]})})},ae={invitations:{pageSize:10,keepPreviousData:!0}},te=()=>{const e=(0,s.useCardState)(),{organization:i,invitations:o}=(0,a.Z5)(ae),{options:t,isLoading:r}=(0,Q.x)();return i?(0,n.Y)(W.bQ,{page:(null==o?void 0:o.page)||1,onPageChange:(null==o?void 0:o.fetchPage)||(()=>null),itemCount:(null==o?void 0:o.count)||0,pageCount:(null==o?void 0:o.pageCount)||0,itemsPerPage:ae.invitations.pageSize,isLoading:(null==o?void 0:o.isLoading)||r,emptyStateLocalizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.invitationsTab.table__emptyRow"),headers:[(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,l.localizationKeys)("organizationProfile.membersPage.invitedMembersTab.tableHeader__invited"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__role"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:((null==o?void 0:o.data)||[]).map((i=>{return(0,n.Y)(re,{options:t,invitation:i,onRevoke:(a=i,async()=>e.runAsync((async()=>{var e;return await a.revoke(),await(null===(e=null==o?void 0:o.revalidate)||void 0===e?void 0:e.call(o)),a})).catch((i=>(0,f.H4)(i,[],e.setError))))},i.id);var a}))}):null},re=e=>{var i;const{invitation:o,onRevoke:a,options:t}=e,{localizeCustomRole:r}=(0,Q.l)(),d=null===(i=null==t?void 0:t.find((e=>e.value===o.role)))||void 0===i?void 0:i.label;return(0,n.FD)(W.Yq,{children:[(0,n.Y)(l.Td,{children:(0,n.Y)(s.UserPreview,{sx:{maxWidth:"30ch"},user:{primaryEmailAddress:{emailAddress:o.emailAddress}}})}),(0,n.Y)(l.Td,{children:(0,n.Y)(l.Box,{as:"span",elementDescriptor:l.descriptors.formattedDate,elementId:l.descriptors.formattedDate.setId("tableCell"),children:o.createdAt.toLocaleDateString()})}),(0,n.Y)(l.Td,{children:(0,n.Y)(l.Text,{colorScheme:"secondary",localizationKey:r(o.role)||d})}),(0,n.Y)(l.Td,{children:(0,n.Y)(s.ThreeDotsMenu,{actions:[{label:(0,l.localizationKeys)("organizationProfile.membersPage.invitedMembersTab.menuAction__revoke"),isDestructive:!0,onClick:a}],elementId:"invitation"})})]})},le=(0,s.withCardStateProvider)((()=>{var e;const{organizationSettings:i}=(0,r.useEnvironment)(),{__unstable_manageBillingUrl:o,navigateToGeneralPageRoot:a}=(0,r.useOrganizationProfileContext)(),t=null===(e=null==i?void 0:i.domains)||void 0===e?void 0:e.enabled;return(0,n.FD)(l.Col,{gap:4,sx:{width:"100%"},children:[o&&(0,n.Y)(ne,{}),t&&(0,n.Y)(c.EH,{permission:"org:sys_domains:manage",children:(0,n.FD)(l.Flex,{sx:e=>({width:"100%",gap:e.space.$8,paddingBottom:e.space.$4,paddingLeft:e.space.$1,paddingRight:e.space.$1,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100,[G.mqu.md]:{flexDirection:"column",gap:e.space.$2}}),children:[(0,n.Y)(l.Col,{sx:e=>({width:e.space.$66,marginTop:e.space.$2}),children:(0,n.Y)(s.Header.Root,{children:(0,n.Y)(s.Header.Title,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.invitationsTab.autoInvitations.headerTitle"),textVariant:"h3"})})}),(0,n.Y)(l.Col,{sx:{width:"100%"},children:(0,n.Y)($,{fallback:(0,n.FD)(n.FK,{children:[(0,n.Y)(s.ProfileSection.ArrowButton,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.invitationsTab.autoInvitations.primaryButton"),id:"manageVerifiedDomains",sx:e=>({gap:e.space.$2}),onClick:a}),(0,n.Y)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.invitationsTab.autoInvitations.headerSubtitle"),sx:e=>({paddingLeft:e.space.$10,color:e.colors.$colorTextSecondary,[G.mqu.md]:{paddingLeft:0}})})]}),verificationStatus:"verified",enrollmentMode:"automatic_invitation"})})]})}),(0,n.FD)(l.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,n.Y)(oe,{}),(0,n.Y)(te,{})]})]})})),se={membershipRequests:{pageSize:10,keepPreviousData:!0}},de=()=>{var e;const i=(0,s.useCardState)(),{organization:o,membershipRequests:t}=(0,a.Z5)(se);return o?(0,n.Y)(W.bQ,{page:(null==t?void 0:t.page)||1,onPageChange:null!==(e=null==t?void 0:t.fetchPage)&&void 0!==e?e:()=>null,itemCount:(null==t?void 0:t.count)||0,pageCount:(null==t?void 0:t.pageCount)||0,itemsPerPage:se.membershipRequests.pageSize,isLoading:null==t?void 0:t.isLoading,emptyStateLocalizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.requestsTab.table__emptyRow"),headers:[(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,l.localizationKeys)("organizationProfile.membersPage.requestsTab.tableHeader__requested"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:((null==t?void 0:t.data)||[]).map((e=>(0,n.Y)(ce,{request:e,onError:i.setError},e.id)))}):null},ce=(0,s.withCardStateProvider)((e=>{const{request:i,onError:o}=e,t=(0,s.useCardState)(),{membership:r,membershipRequests:d}=(0,a.Z5)(se);return(0,n.FD)(W.Yq,{children:[(0,n.Y)(l.Td,{children:(0,n.Y)(s.UserPreview,{sx:{maxWidth:"30ch"},showAvatar:!1,user:{primaryEmailAddress:{emailAddress:i.publicUserData.identifier}}})}),(0,n.Y)(l.Td,{children:(0,n.Y)(l.Box,{as:"span",elementDescriptor:l.descriptors.formattedDate,elementId:l.descriptors.formattedDate.setId("tableCell"),children:i.createdAt.toLocaleDateString()})}),(0,n.Y)(l.Td,{children:(0,n.Y)(me,{onAccept:()=>{if(r&&d)return t.runAsync((async()=>{await i.accept(),await d.revalidate()}),"accept").catch((e=>(0,f.H4)(e,[],o)))},onReject:()=>{if(r&&d)return t.runAsync((async()=>{await i.reject(),await d.revalidate()}),"reject").catch((e=>(0,f.H4)(e,[],o)))}})})]})})),me=e=>{const i=(0,s.useCardState)();return(0,n.FD)(l.Flex,{gap:2,children:[(0,n.Y)(l.Button,{textVariant:"buttonSmall",variant:"ghost",isLoading:i.isLoading&&"reject"===i.loadingMetadata,isDisabled:i.isLoading&&"reject"!==i.loadingMetadata,onClick:e.onReject,localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.requestsTab.menuAction__reject")}),(0,n.Y)(l.Button,{textVariant:"buttonSmall",isLoading:i.isLoading&&"accept"===i.loadingMetadata,isDisabled:i.isLoading&&"accept"!==i.loadingMetadata,onClick:e.onAccept,localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.requestsTab.menuAction__approve")})]})},ge=()=>{var e;const{organizationSettings:i}=(0,r.useEnvironment)(),{__unstable_manageBillingUrl:o,navigateToGeneralPageRoot:a}=(0,r.useOrganizationProfileContext)(),t=null===(e=null==i?void 0:i.domains)||void 0===e?void 0:e.enabled;return(0,n.FD)(l.Col,{gap:4,sx:{width:"100%"},children:[o&&(0,n.Y)(ne,{}),t&&(0,n.Y)(c.EH,{permission:"org:sys_domains:manage",children:(0,n.FD)(l.Flex,{sx:e=>({width:"100%",gap:e.space.$8,paddingBottom:e.space.$4,paddingLeft:e.space.$1,paddingRight:e.space.$1,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100,[G.mqu.md]:{flexDirection:"column",gap:e.space.$2}}),children:[(0,n.Y)(l.Col,{sx:e=>({width:e.space.$66,marginTop:e.space.$2}),children:(0,n.Y)(s.Header.Root,{children:(0,n.Y)(s.Header.Title,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.requestsTab.autoSuggestions.headerTitle"),textVariant:"h3"})})}),(0,n.Y)(l.Col,{sx:{width:"100%"},children:(0,n.Y)($,{fallback:(0,n.FD)(n.FK,{children:[(0,n.Y)(s.ProfileSection.ArrowButton,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.requestsTab.autoSuggestions.primaryButton"),sx:e=>({gap:e.space.$2}),id:"manageVerifiedDomains",onClick:a}),(0,n.Y)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.requestsTab.autoSuggestions.headerSubtitle"),sx:e=>({paddingLeft:e.space.$10,color:e.colors.$colorTextSecondary,[G.mqu.md]:{paddingLeft:0}})})]}),verificationStatus:"verified",enrollmentMode:"automatic_suggestion"})})]})}),(0,n.FD)(l.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,n.Y)(oe,{}),(0,n.Y)(de,{})]})]})},ue=(0,s.withCardStateProvider)((()=>{var e;const{organizationSettings:i}=(0,r.useEnvironment)(),o=(0,s.useCardState)(),t=(0,c.Fd)({permission:"org:sys_memberships:manage"}),d=(0,c.Fd)({permission:"org:sys_memberships:read"}),m=(null===(e=null==i?void 0:i.domains)||void 0===e?void 0:e.enabled)&&t,{membershipRequests:g,memberships:u,invitations:p}=(0,a.Z5)({membershipRequests:m||void 0,invitations:t||void 0,memberships:d||void 0}),{__unstable_manageBillingUrl:v}=(0,r.useOrganizationProfileContext)();return null===t?null:(0,n.Y)(l.Col,{elementDescriptor:l.descriptors.page,gap:2,children:(0,n.Y)(l.Col,{elementDescriptor:l.descriptors.profilePage,elementId:l.descriptors.profilePage.setId("organizationMembers"),gap:4,children:(0,n.FD)(h.r.Root,{animate:!1,children:[(0,n.Y)(s.Animated,{asChild:!0,children:(0,n.Y)(s.Header.Root,{contentSx:{[G.mqu.md]:{flexDirection:"row",width:"100%",justifyContent:"space-between"}},children:(0,n.Y)(s.Header.Title,{localizationKey:(0,l.localizationKeys)("organizationProfile.start.headerTitle__members"),textVariant:"h2"})})}),(0,n.Y)(s.Card.Alert,{children:o.error}),(0,n.FD)(s.Tabs,{children:[(0,n.FD)(s.TabsList,{sx:e=>({gap:e.space.$2}),children:[d&&(0,n.Y)(s.Tab,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.start.headerTitle__members"),children:(null==u?void 0:u.data)&&!u.isLoading&&(0,n.Y)(c.am,{notificationCount:u.count,colorScheme:"outline"})}),t&&(0,n.Y)(s.Tab,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.start.headerTitle__invitations"),children:(null==p?void 0:p.data)&&!p.isLoading&&(0,n.Y)(c.am,{notificationCount:p.count,colorScheme:"outline"})}),t&&m&&(0,n.Y)(s.Tab,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.start.headerTitle__requests"),children:(null==g?void 0:g.data)&&!g.isLoading&&(0,n.Y)(c.am,{notificationCount:g.count,colorScheme:"outline"})})]}),(0,n.FD)(s.TabPanels,{children:[d&&(0,n.Y)(s.TabPanel,{sx:{width:"100%"},children:(0,n.FD)(l.Flex,{gap:4,direction:"col",sx:{width:"100%"},children:[t&&v&&(0,n.Y)(ne,{}),(0,n.FD)(l.Flex,{gap:2,direction:"col",sx:{width:"100%"},children:[(0,n.Y)(oe,{}),(0,n.Y)(X,{})]})]})}),t&&(0,n.Y)(s.TabPanel,{sx:{width:"100%"},children:(0,n.Y)(le,{})}),t&&m&&(0,n.Y)(s.TabPanel,{sx:{width:"100%"},children:(0,n.Y)(ge,{})})]})]})]})})})})),pe=()=>{var e;const{pages:i,isMembersPageRoot:o,isGeneralPageRoot:a}=(0,r.useOrganizationProfileContext)(),t=null===(e=i.contents)||void 0===e?void 0:e.map(((e,i)=>{const t=!a&&!o&&0===i;return(0,n.Y)(d.Route,{index:t,path:t?void 0:e.url,children:(0,n.Y)(p.H,{mount:e.mount,unmount:e.unmount})},`custom-page-${e.url}`)}));return(0,n.FD)(d.Switch,{children:[t,(0,n.FD)(d.Route,{children:[(0,n.Y)(d.Route,{path:a?void 0:"organization-general",children:(0,n.Y)(d.Switch,{children:(0,n.Y)(d.Route,{index:!0,children:(0,n.Y)(q,{})})})}),(0,n.Y)(d.Route,{path:o?void 0:"organization-members",children:(0,n.Y)(d.Switch,{children:(0,n.Y)(d.Route,{index:!0,children:(0,n.Y)(c.EH,{condition:e=>e({permission:"org:sys_memberships:read"})||e({permission:"org:sys_memberships:manage"}),redirectTo:a?"../":"./organization-general",children:(0,n.Y)(ue,{})})})})})]})]})},he=(0,r.withCoreUserGuard)((()=>{const e=t.useRef(null);return(0,n.Y)(s.ProfileCard.Root,{sx:e=>({display:"grid",gridTemplateColumns:"1fr 3fr",height:e.sizes.$176,overflow:"hidden"}),children:(0,n.FD)(u,{contentRef:e,children:[(0,n.Y)(s.NavbarMenuButtonRow,{navbarTitleLocalizationKey:(0,l.localizationKeys)("organizationProfile.navbar.title")}),(0,n.Y)(s.ProfileCard.Content,{contentRef:e,children:(0,n.Y)(pe,{})})]})})})),ve=(0,s.withCardStateProvider)((e=>{const{organization:i}=(0,a.Z5)();return i?(0,n.Y)(l.Flow.Root,{flow:"organizationProfile",children:(0,n.Y)(l.Flow.Part,{children:(0,n.Y)(d.Switch,{children:(0,n.Y)(d.Route,{children:(0,n.Y)(he,{})})})})}):null})),fe=e=>{const i={...e,routing:"virtual",componentName:"OrganizationProfile",mode:"modal"};return(0,n.Y)(d.Route,{path:"organizationProfile",children:(0,n.Y)(r.ComponentContext.Provider,{value:i,children:(0,n.Y)("div",{children:(0,n.Y)(ve,{...i})})})})}}}]);