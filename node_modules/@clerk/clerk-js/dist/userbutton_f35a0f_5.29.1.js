"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[278],{9721:function(e,r,t){t.r(r),t.d(r,{UserButton:function(){return k}});var n=t(4380),o=t(4041),s=t(844),i=t(9333),l=t(8369),a=t(5909),d=t(3931),c=t(7086),u=t(3962);const p=o.forwardRef(((e,r)=>{const{close:t,...o}=e,a=()=>null==t?void 0:t(),{session:p}=(0,d.wV)(),{__experimental_asStandalone:h}=(0,s.useUserButtonContext)(),{authConfig:C}=(0,s.useEnvironment)(),{user:m}=(0,d.Jd)(),{handleAddAccountClicked:g,handleManageAccountClicked:k,handleSessionClicked:f,handleSignOutAllClicked:x,handleSignOutSessionClicked:v,handleUserProfileActionClicked:B,otherSessions:S}=(0,u.u)({...(0,s.useUserButtonContext)(),actionCompleteCallback:a,user:m});return(0,n.Y)(l.RootBox,{elementDescriptor:i.descriptors.userButtonPopoverRootBox,children:(0,n.FD)(l.PopoverCard.Root,{elementDescriptor:i.descriptors.userButtonPopoverCard,ref:r,role:"dialog","aria-label":"User button popover",shouldEntryAnimate:!h,...o,children:[(0,n.FD)(l.PopoverCard.Content,{elementDescriptor:i.descriptors.userButtonPopoverMain,children:[(0,n.Y)(l.UserPreview,{elementId:"userButton",user:m,sx:e=>({width:"100%",padding:`${e.space.$4} ${e.space.$5}`})}),C.singleSessionMode?(0,n.Y)(c.iR,{handleManageAccountClicked:k,handleSignOutSessionClicked:v,handleUserProfileActionClicked:B,session:p,completedCallback:a}):(0,n.Y)(c.pS,{session:p,otherSessions:S,handleManageAccountClicked:k,handleSignOutSessionClicked:v,handleSessionClicked:f,handleAddAccountClicked:g,handleUserProfileActionClicked:B,completedCallback:a})]}),(0,n.Y)(l.PopoverCard.Footer,{elementDescriptor:i.descriptors.userButtonPopoverFooter,children:!C.singleSessionMode&&S.length>0&&(0,n.Y)(c.ww,{handleSignOutAllClicked:x})})]})})}));var h=t(8740);const C=({showName:e})=>{const{user:r}=(0,d.Jd)();return r&&e?(0,n.Y)(i.Text,{variant:"subtitle",as:"span",elementDescriptor:i.descriptors.userButtonOuterIdentifier,sx:[e=>({paddingLeft:e.space.$2})],children:(0,h.dS)(r)||(0,h.Cm)(r)}):null},m=(0,l.withAvatarShimmer)((0,o.forwardRef)(((e,r)=>{const{sx:t,...o}=e,{user:a}=(0,d.Jd)(),{showName:c}=(0,s.useUserButtonContext)();return(0,n.Y)(i.Button,{elementDescriptor:i.descriptors.userButtonTrigger,variant:"roundWrapper",sx:[e=>({borderRadius:c?e.radii.$md:e.radii.$circle,color:e.colors.$colorText}),t],ref:r,"aria-label":(e.isOpen?"Close":"Open")+" user button","aria-expanded":e.isOpen,"aria-haspopup":"dialog",...o,children:(0,n.FD)(i.Flex,{elementDescriptor:i.descriptors.userButtonBox,isOpen:e.isOpen,align:"center",as:"span",gap:2,children:[(0,n.Y)(C,{showName:c}),(0,n.Y)(l.UserAvatar,{boxElementDescriptor:i.descriptors.userButtonAvatarBox,imageElementDescriptor:i.descriptors.userButtonAvatarImage,...a,size:e=>e.sizes.$7})]})})}))),g=(0,l.withFloatingTree)((({children:e})=>{const{defaultOpen:r}=(0,s.useUserButtonContext)(),{floating:t,reference:i,styles:d,toggle:c,isOpen:u,nodeId:p,context:h}=(0,a.fP)({defaultOpen:r,placement:"bottom-end",offset:8}),C=(0,o.useId)();return(0,n.FD)(n.FK,{children:[(0,n.Y)(m,{ref:i,onClick:c,isOpen:u,"aria-controls":u?C:void 0,"aria-expanded":u}),(0,n.Y)(l.Popover,{nodeId:p,context:h,isOpen:u,children:(0,o.cloneElement)(e,{id:C,close:c,ref:t,style:d})})]})})),k=(0,s.withCoreUserGuard)((0,l.withCardStateProvider)((()=>{const{__experimental_asStandalone:e}=(0,s.useUserButtonContext)();return(0,n.Y)(i.Flow.Root,{flow:"userButton",sx:{display:"inline-flex"},children:e?(0,n.Y)(p,{}):(0,n.Y)(g,{children:(0,n.Y)(p,{})})})})))}}]);