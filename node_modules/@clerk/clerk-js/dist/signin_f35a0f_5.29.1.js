"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[417],{72:function(e,t,r){r.d(t,{n:function(){return a}});var o=r(4380),n=r(9333),i=r(8369);const a=e=>{const{onBackLinkClick:t}=e;return(0,o.Y)(i.ErrorCard,{cardTitle:(0,n.localizationKeys)("signIn.alternativeMethods.getHelp.title"),cardSubtitle:(0,n.localizationKeys)("signIn.alternativeMethods.getHelp.content"),onBackLinkClick:t})}},601:function(e,t,r){r.r(t),r.d(t,{SignIn:function(){return me},SignInModal:function(){return Ce}});var o=r(4380),n=r(3931),i=r(4041),a=r(9251),s=r(844),l=r(9333),c=r(166),d=r(5882),u=r(8369),p=r(5909),h=r(1101),f=r(9927);const g=(0,u.withCardStateProvider)((()=>{const e=(0,s.useCoreSignIn)(),t=(0,u.useCardState)(),{navigate:r}=(0,c.useRouter)(),n=(0,h.p)(),{userSettings:{passwordSettings:a}}=(0,s.useEnvironment)(),{t:g,locale:m}=(0,l.useLocalizations)(),C="needs_new_password"===e.status&&"reset_password_email_code"!==e.firstFactorVerification.strategy&&"reset_password_phone_code"!==e.firstFactorVerification.strategy;i.useEffect((()=>{C&&t.setError(g((0,l.localizationKeys)("signIn.resetPassword.requiredMessage")))}),[]);const w=(0,f.tJ)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,f.C5)(e,{t:g,locale:m,passwordSettings:a})}),v=(0,f.tJ)("confirmPassword","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),I=(0,f.tJ)("signOutOfOtherSessions","",{type:"checkbox",label:(0,l.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:y,isPasswordMatch:S}=(0,p.Zg)({passwordField:w,confirmPasswordField:v}),_=S;return(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.Y)(u.Header.Root,{showLogo:!0,children:(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.resetPassword.title")})}),(0,o.Y)(u.Card.Alert,{children:t.error}),(0,o.Y)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,children:(0,o.FD)(u.Form.Root,{onSubmit:async()=>{w.clearFeedback(),v.clearFeedback();try{const{status:t,createdSessionId:o}=await e.resetPassword({password:w.value,signOutOfOtherSessions:I.checked});switch(t){case"complete":if(o){const e=new URLSearchParams;return e.set("createdSessionId",o),r(`../reset-password-success?${e.toString()}`)}return console.error((0,d.wv)(t,n));case"needs_second_factor":return r("../factor-two");default:return console.error((0,d.wv)(t,n))}}catch(o){return(0,f.H4)(o,[w,v],t.setError)}},onBlur:()=>{w.value&&y(v.value)},gap:8,children:[(0,o.FD)(l.Col,{gap:6,children:[(0,o.Y)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.identifier||"",style:{display:"none"}}),(0,o.Y)(u.Form.ControlRow,{elementId:w.id,children:(0,o.Y)(u.Form.PasswordInput,{...w.props,isRequired:!0,autoFocus:!0})}),(0,o.Y)(u.Form.ControlRow,{elementId:v.id,children:(0,o.Y)(u.Form.PasswordInput,{...v.props,onChange:e=>(e.target.value&&y(e.target.value),v.props.onChange(e))})}),!C&&(0,o.Y)(u.Form.ControlRow,{elementId:I.id,children:(0,o.Y)(u.Form.Checkbox,{...I.props})})]}),(0,o.FD)(l.Col,{gap:3,children:[(0,o.Y)(u.Form.SubmitButton,{isDisabled:!_,localizationKey:(0,l.localizationKeys)("signIn.resetPassword.formButtonPrimary")}),(0,o.Y)(u.Card.Action,{elementId:"alternativeMethods",children:(0,o.Y)(u.Card.ActionLink,{elementDescriptor:l.descriptors.backLink,localizationKey:(0,l.localizationKeys)("backButton"),onClick:()=>r("../")})})]})]})})]}),(0,o.Y)(u.Card.Footer,{})]})}));var m=r(9065),C=r(2170);const w=(0,u.withCardStateProvider)((()=>{const e=(0,u.useCardState)();return(0,m.h)(),(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.Y)(u.Header.Root,{showLogo:!0,children:(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.resetPassword.title")})}),(0,o.Y)(u.Card.Alert,{children:e.error}),(0,o.FD)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,children:[(0,o.Y)(l.Text,{localizationKey:(0,l.localizationKeys)("signIn.resetPassword.successMessage")}),(0,o.Y)(C.so,{direction:"row",center:!0,children:(0,o.Y)(l.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:l.descriptors.spinner})})]})]}),(0,o.Y)(u.Card.Footer,{})]})}));var v=r(7362),I=r(1241),y=r(8313),S=r(7086),_=r(3962);const k=(0,v.SY)((0,u.withCardStateProvider)((()=>{const e=(0,I.f0)(),{userProfileUrl:t}=(0,s.useEnvironment)().displayConfig,{navigateAfterSignIn:r,path:n}=(0,s.useSignInContext)(),{navigateAfterSignOut:i}=(0,s.useSignOutContext)(),{handleSignOutAllClicked:a,handleSessionClicked:c,activeSessions:d,handleAddAccountClicked:p}=(0,_.u)({navigateAfterSignOut:i,navigateAfterSwitchSession:r,userProfileUrl:t,signInUrl:n,user:void 0});return(0,o.Y)(l.Flow.Part,{part:"accountSwitcher",children:(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{sx:e=>({padding:`${e.space.$8} ${e.space.$none} ${e.space.$none}`}),children:[(0,o.FD)(u.Header.Root,{children:[(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.accountSwitcher.title")}),(0,o.Y)(u.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.accountSwitcher.subtitle")})]}),(0,o.Y)(u.Card.Alert,{children:e.error}),(0,o.Y)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:(0,o.FD)(u.Actions,{role:"menu",children:[d.map((e=>(0,o.Y)(u.PreviewButton,{onClick:c(e),sx:e=>({height:e.sizes.$16,justifyContent:"flex-start",borderRadius:0}),icon:y.yO,children:(0,o.Y)(u.UserPreview,{user:e.user,sx:{width:"100%"}})},e.id))),(0,o.Y)(u.Action,{elementDescriptor:l.descriptors.accountSwitcherActionButton,elementId:l.descriptors.accountSwitcherActionButton.setId("addAccount"),iconBoxElementDescriptor:l.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:l.descriptors.accountSwitcherActionButtonIconBox.setId("addAccount"),iconElementDescriptor:l.descriptors.accountSwitcherActionButtonIcon,iconElementId:l.descriptors.accountSwitcherActionButtonIcon.setId("addAccount"),icon:y.OM,label:(0,l.localizationKeys)("signIn.accountSwitcher.action__addAccount"),onClick:p,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})})]}),(0,o.Y)(u.Card.Footer,{sx:e=>({">:first-of-type":{padding:`${e.space.$1}`,width:"100%"}}),children:(0,o.Y)(u.Card.Action,{sx:{width:"100%",">:first-of-type":{width:"100%",borderBottomWidth:0}},children:(0,o.Y)(S.ww,{handleSignOutAllClicked:a,elementDescriptor:l.descriptors.accountSwitcherActionButton,elementId:l.descriptors.accountSwitcherActionButton.setId("signOutAll"),iconBoxElementDescriptor:l.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:l.descriptors.accountSwitcherActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:l.descriptors.accountSwitcherActionButtonIcon,iconElementId:l.descriptors.accountSwitcherActionButtonIcon.setId("signOutAll"),label:(0,l.localizationKeys)("signIn.accountSwitcher.action__signOutAll"),actionSx:e=>({padding:`${e.space.$2} ${e.space.$2}`})})})})]})})})));var F=r(6588),b=r(9513),Y=r(7453),A=r(9351),z=r(5675);const K=i.memo((e=>{const t=(0,n.ho)(),{navigate:r}=(0,c.useRouter)(),i=(0,I.f0)(),{displayConfig:a}=(0,A.O)(),l=(0,s.useSignInContext)(),d=(0,s.useCoreSignIn)(),u=(0,Y.u)(l,a.signInUrl),p=l.afterSignInUrl||"/";return(0,o.Y)(z.V,{...e,oauthCallback:e=>d.authenticateWithRedirect({strategy:e,redirectUrl:u,redirectUrlComplete:p}).catch((e=>(0,f.H4)(e,[],i.setError))),web3Callback:e=>t.authenticateWithWeb3({customNavigate:r,redirectUrl:p,signUpContinueUrl:l.signUpContinueUrl,strategy:e}).catch((e=>(0,f.H4)(e,[],i.setError)))})}));var P=r(6761);function L(){var e;return null===(e=(0,s.useCoreSignIn)().supportedFirstFactors)||void 0===e?void 0:e.find((({strategy:e})=>(0,P.Kw)(e)))}var D=r(72);const E=e=>((e,t)=>{const[r,n]=i.useState(!1),a=i.useCallback((()=>n((e=>!e))),[n]);return r?(0,o.Y)(D.n,{onBackLinkClick:a}):(0,o.Y)(e,{...t,onHavingTroubleClick:a})})(B,{...e}),B=e=>{const{onBackLinkClick:t,onHavingTroubleClick:r,onFactorSelected:n,mode:i="default"}=e,a=(0,I.f0)(),c=L(),{supportedFirstFactors:d}=(0,s.useCoreSignIn)(),{firstPartyFactors:p,hasAnyStrategy:h}=(0,F.y)({filterOutFactor:null==e?void 0:e.currentFactor,supportedFirstFactors:d}),f=function(e){switch(e){case"forgot":return"forgotPasswordMethods";case"pwned":return"passwordPwnedMethods";default:return"alternativeMethods"}}(i),g=function(e){switch(e){case"forgot":return(0,l.localizationKeys)("signIn.forgotPasswordAlternativeMethods.title");case"pwned":return(0,l.localizationKeys)("signIn.passwordPwned.title");default:return(0,l.localizationKeys)("signIn.alternativeMethods.title")}}(i),m=function(e){switch(e){case"forgot":case"pwned":return!0;default:return!1}}(i);return(0,o.Y)(l.Flow.Part,{part:f,children:(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.FD)(u.Header.Root,{showLogo:!0,children:[(0,o.Y)(u.Header.Title,{localizationKey:g}),!m&&(0,o.Y)(u.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,o.Y)(u.Card.Alert,{children:a.error}),(0,o.FD)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:6,children:[m&&c&&(0,o.Y)(l.Button,{localizationKey:M(c),elementDescriptor:l.descriptors.alternativeMethodsBlockButton,isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),n(c)}}),m&&h&&(0,o.Y)(u.Divider,{dividerText:(0,l.localizationKeys)("signIn.forgotPasswordAlternativeMethods.label__alternativeMethods")}),(0,o.FD)(l.Col,{gap:4,children:[h&&(0,o.FD)(l.Flex,{elementDescriptor:l.descriptors.alternativeMethods,direction:"col",gap:2,children:[(0,o.Y)(K,{enableWeb3Providers:!0,enableOAuthProviders:!0}),p&&p.map(((e,t)=>(0,o.Y)(u.ArrowBlockButton,{leftIcon:R(e),textLocalizationKey:M(e),elementDescriptor:l.descriptors.alternativeMethodsBlockButton,textElementDescriptor:l.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:l.descriptors.alternativeMethodsBlockButtonArrow,textVariant:"buttonLarge",isDisabled:a.isLoading,onClick:()=>{a.setError(void 0),n(e)}},t)))]}),t&&(0,o.Y)(u.BackLink,{boxElementDescriptor:l.descriptors.backRow,linkElementDescriptor:l.descriptors.backLink,onClick:t})]})]})]}),(0,o.Y)(u.Card.Footer,{children:(0,o.FD)(u.Card.Action,{elementId:"havingTrouble",children:[(0,o.Y)(u.Card.ActionText,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:r})]})})]})})};function M(e){switch(e.strategy){case"email_link":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__emailLink",{identifier:(0,f.uu)(e.safeIdentifier)||""});case"email_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__emailCode",{identifier:(0,f.uu)(e.safeIdentifier)||""});case"phone_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,f.uu)(e.safeIdentifier)||""});case"password":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__password");case"passkey":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__passkey");case"reset_password_email_code":case"reset_password_phone_code":return(0,l.localizationKeys)("signIn.forgotPasswordAlternativeMethods.blockButton__resetPassword");default:throw`Invalid sign in strategy: "${e.strategy}"`}}function R(e){return{email_link:y.qY,email_code:y.Ps,phone_code:y.bK,reset_password_email_code:y.Zm,reset_password_phone_code:y.Zm,password:y.JD,passkey:y.$A}[e.strategy]}var T=r(8174);const U=e=>{const t=(0,s.useCoreSignIn)(),r=(0,u.useCardState)(),{navigate:a}=(0,c.useRouter)(),{navigateAfterSignIn:l}=(0,s.useSignInContext)(),{setActive:p}=(0,n.ho)(),g=(0,h.p)(),m=(0,n.ho)();i.useEffect((()=>{e.factorAlreadyPrepared||C()}),[]);const C=()=>{t.prepareFirstFactor(e.factor).then((()=>e.onFactorPrepare())).catch((e=>(0,f.H4)(e,[],r.setError)))};return(0,o.Y)(u.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,inputLabel:e.inputLabel,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,o,n)=>{t.attemptFirstFactor({strategy:e.factor.strategy,code:r}).then((async e=>{switch(await o(),e.status){case"complete":return p({session:e.createdSessionId,beforeEmit:l});case"needs_second_factor":return a("../factor-two");case"needs_new_password":return a("../reset-password");default:return console.error((0,d.wv)(e.status,g))}})).catch((e=>(0,T._d)(e)?m.__internal_navigateWithError("..",e.errors[0]):n(e)))},onResendCodeClicked:C,safeIdentifier:e.factor.safeIdentifier,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,showAlternativeMethods:e.showAlternativeMethods,onIdentityPreviewEditClicked:()=>a("../"),onBackLinkClicked:e.onBackLinkClicked})},x=e=>(0,o.Y)(l.Flow.Part,{part:"emailCode",children:(0,o.Y)(U,{...e,cardTitle:(0,l.localizationKeys)("signIn.emailCode.title"),cardSubtitle:(0,l.localizationKeys)("signIn.emailCode.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.emailCode.formTitle"),resendButton:(0,l.localizationKeys)("signIn.emailCode.resendButton")})});var O=r(9859),H=r(6910),$=r(8622);const N=e=>{const{t:t}=(0,l.useLocalizations)(),r=(0,I.f0)(),a=(0,s.useCoreSignIn)(),c=(0,s.useSignInContext)(),{signInUrl:d}=c,{navigate:p}=(0,$.r)(),{navigateAfterSignIn:h}=(0,s.useSignInContext)(),{setActive:g}=(0,n.ho)(),{startEmailLinkFlow:m,cancelEmailLinkFlow:C}=(0,H.u)(a),[w,y]=i.useState(!1),S=(0,n.ho)();i.useEffect((()=>{_()}),[]);const _=()=>{m({emailAddressId:e.factor.emailAddressId,redirectUrl:(0,Y.W)(c,d)}).then((e=>k(e))).catch((e=>{if((0,O._d)(e))return S.__internal_navigateWithError("..",e.errors[0]);(0,f.H4)(e,[],r.setError)}))},k=async e=>{const o=e.firstFactorVerification;"expired"===o.status?r.setError(t((0,l.localizationKeys)("formFieldError__verificationLinkExpired"))):o.verifiedFromTheSameClient()?y(!0):await F(e)},F=async e=>"complete"===e.status?g({session:e.createdSessionId,beforeEmit:h}):"needs_second_factor"===e.status?p("../factor-two"):void 0;return w?(0,o.Y)(v.$W,{title:(0,l.localizationKeys)("signIn.emailLink.verifiedSwitchTab.titleNewTab"),subtitle:(0,l.localizationKeys)("signIn.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,o.Y)(l.Flow.Part,{part:"emailLink",children:(0,o.Y)(u.VerificationLinkCard,{cardTitle:(0,l.localizationKeys)("signIn.emailLink.title"),cardSubtitle:(0,l.localizationKeys)("signIn.emailLink.subtitle"),formTitle:(0,l.localizationKeys)("signIn.emailLink.formTitle"),formSubtitle:(0,l.localizationKeys)("signIn.emailLink.formSubtitle"),resendButton:(0,l.localizationKeys)("signIn.emailLink.resendButton"),onResendCodeClicked:()=>{C(),_()},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:a.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked})})},W=e=>(0,o.Y)(l.Flow.Part,{part:"resetPassword",children:(0,o.Y)(U,{...e,showAlternativeMethods:!1,cardTitle:(0,l.localizationKeys)("signIn.forgotPassword.title"),inputLabel:(0,l.localizationKeys)("signIn.forgotPassword.formTitle"),resendButton:(0,l.localizationKeys)("signIn.forgotPassword.resendButton")})});var V=r(2410);function Q(e){const t=(0,u.useCardState)(),{setActive:r,__internal_navigateWithError:o}=(0,n.ho)(),a=(0,h.p)(),{navigateAfterSignIn:l}=(0,s.useSignInContext)(),{authenticateWithPasskey:c}=(0,s.useCoreSignIn)();return(0,i.useEffect)((()=>()=>{V.sv.abort()}),[]),(0,i.useCallback)((async(...n)=>{try{const t=await c(...n);switch(t.status){case"complete":return r({session:t.createdSessionId,beforeEmit:l});case"needs_second_factor":return e();default:return console.error((0,d.wv)(t.status,a))}}catch(i){const{flow:e}=n[0]||{};if((0,O.Cm)(i)){if("passkey_operation_aborted"===i.code)return;if("autofill"===e&&"passkey_retrieval_cancelled"===i.code)return}if((0,O._d)(i))return o("..",i.errors[0]);(0,f.H4)(i,[],t.setError)}}),[])}const G=e=>{const{onShowAlternativeMethodsClick:t}=e,r=(0,u.useCardState)(),n=(0,s.useCoreSignIn)(),{navigate:a}=(0,$.r)(),[c,d]=i.useState(!1),p=i.useCallback((()=>d((e=>!e))),[d]),h=Q((()=>a("../factor-two")));return c?(0,o.Y)(D.n,{onBackLinkClick:p}):(0,o.Y)(l.Flow.Part,{part:"password",children:(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.FD)(u.Header.Root,{showLogo:!0,children:[(0,o.Y)(l.Icon,{elementDescriptor:l.descriptors.passkeyIcon,icon:y.$A,sx:e=>({color:e.colors.$neutralAlpha500,marginInline:"auto",paddingBottom:e.sizes.$1,width:e.sizes.$12,height:e.sizes.$12})}),(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.passkey.title")}),(0,o.Y)(u.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.passkey.subtitle")}),(0,o.Y)(u.IdentityPreview,{identifier:n.identifier,avatarUrl:n.userData.imageUrl,onClick:()=>a("../")})]}),(0,o.Y)(u.Card.Alert,{children:r.error}),(0,o.FD)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:4,children:[(0,o.Y)(u.Form.Root,{onSubmit:e=>(e.preventDefault(),h()),gap:8,children:(0,o.Y)(u.Form.SubmitButton,{hasArrow:!0})}),(0,o.Y)(u.Card.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)(t?"footerActionLink__useAnotherMethod":"signIn.alternativeMethods.actionLink"),onClick:t||p})})]})]}),(0,o.Y)(u.Card.Footer,{})]})})},J=e=>{const{onShowAlternativeMethodsClick:t,onPasswordPwned:r}=e,a=i.useRef(null),c=(0,u.useCardState)(),{setActive:p}=(0,n.ho)(),g=(0,s.useCoreSignIn)(),{navigateAfterSignIn:m}=(0,s.useSignInContext)(),C=(0,h.p)(),w=(e=>{const{onForgotPasswordMethodClick:t,onShowAlternativeMethodsClick:r}=e,o=L(),n=(0,f.tJ)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__password"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__password")});return{...n,props:{...n.props,actionLabel:o||r?(0,l.localizationKeys)("formFieldAction__forgotPassword"):"",onActionClicked:t||r||(()=>null)}}})(e),{navigate:v}=(0,$.r)(),[I,y]=i.useState(!1),S=i.useCallback((()=>y((e=>!e))),[y]),_=(0,n.ho)();return I?(0,o.Y)(D.n,{onBackLinkClick:S}):(0,o.Y)(l.Flow.Part,{part:"password",children:(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.FD)(u.Header.Root,{showLogo:!0,children:[(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.password.title")}),(0,o.Y)(u.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.password.subtitle")}),(0,o.Y)(u.IdentityPreview,{identifier:g.identifier,avatarUrl:g.userData.imageUrl,onClick:()=>v("../")})]}),(0,o.Y)(u.Card.Alert,{children:c.error}),(0,o.FD)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:4,children:[(0,o.FD)(u.Form.Root,{onSubmit:async e=>(e.preventDefault(),g.attemptFirstFactor({strategy:"password",password:w.value}).then((e=>{switch(e.status){case"complete":return p({session:e.createdSessionId,beforeEmit:m});case"needs_second_factor":return v("../factor-two");default:return console.error((0,d.wv)(e.status,C))}})).catch((e=>(0,O._d)(e)?_.__internal_navigateWithError("..",e.errors[0]):(0,O.Au)(e)&&r?(c.setError({...e.errors[0],code:"form_password_pwned__sign_in"}),void r()):((0,f.H4)(e,[w],c.setError),void setTimeout((()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.focus()}),0))))),gap:8,children:[(0,o.Y)("input",{readOnly:!0,id:"identifier-field",name:"identifier",value:g.identifier||"",style:{display:"none"}}),(0,o.Y)(u.Form.ControlRow,{elementId:w.id,children:(0,o.Y)(u.Form.PasswordInput,{...w.props,ref:a,autoFocus:!0})}),(0,o.Y)(u.Form.SubmitButton,{hasArrow:!0})]}),(0,o.Y)(u.Card.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)(t?"signIn.password.actionLink":"signIn.alternativeMethods.actionLink"),onClick:t||S})})]})]}),(0,o.Y)(u.Card.Footer,{})]})})},q=e=>{const{applicationName:t}=(0,s.useEnvironment)().displayConfig;return(0,o.Y)(l.Flow.Part,{part:"phoneCode",children:(0,o.Y)(U,{...e,cardTitle:(0,l.localizationKeys)("signIn.phoneCode.title"),cardSubtitle:(0,l.localizationKeys)("signIn.phoneCode.subtitle",{applicationName:t}),inputLabel:(0,l.localizationKeys)("signIn.phoneCode.formTitle"),resendButton:(0,l.localizationKeys)("signIn.phoneCode.resendButton")})})},Z=e=>{if(!e)return"";let t=e.strategy;return"emailAddressId"in e&&(t+=e.emailAddressId),"phoneNumberId"in e&&(t+=e.phoneNumberId),t},j=(0,v.SY)((0,u.withCardStateProvider)((function(){const e=(0,s.useCoreSignIn)(),{preferredSignInStrategy:t}=(0,s.useEnvironment)().displayConfig,r=e.supportedFirstFactors,n=(0,c.useRouter)(),a=(0,u.useCardState)(),{supportedFirstFactors:l}=(0,s.useCoreSignIn)(),d=i.useRef(""),[{currentFactor:p},h]=i.useState((()=>({currentFactor:(0,P.xf)(r,e.identifier,t),prevCurrentFactor:void 0}))),{hasAnyStrategy:f}=(0,F.y)({filterOutFactor:p,supportedFirstFactors:l}),[g,m]=i.useState((()=>!p||!(0,P.Cm)(p))),C=L(),[w,v]=i.useState(!1),[I,y]=i.useState(!1);if(i.useEffect((()=>{"needs_identifier"!==e.status&&null!==e.status||n.navigate("../")}),[]),!p&&e.status)return(0,o.Y)(u.ErrorCard,{cardTitle:(0,b.GQ)("signIn.noAvailableMethods.title"),cardSubtitle:(0,b.GQ)("signIn.noAvailableMethods.subtitle"),message:(0,b.GQ)("signIn.noAvailableMethods.message")});const S=f?()=>m((e=>!e)):void 0,_=()=>v((e=>!e)),k=()=>{d.current=Z(p)};if(g||w){const e=(0,P.Cm)(p),t=g?S:_,r=()=>{a.setError(void 0),y(!1),null==t||t()},n=w?I?"pwned":"forgot":"default";return(0,o.Y)(E,{mode:n,onBackLinkClick:e?r:void 0,onFactorSelected:e=>{var r;r=e,h((e=>({currentFactor:r,prevCurrentFactor:e.currentFactor}))),null==t||t()},currentFactor:p})}if(!p)return(0,o.Y)(u.LoadingCard,{});switch(null==p?void 0:p.strategy){case"passkey":return(0,o.Y)(G,{onFactorPrepare:k,onShowAlternativeMethodsClick:S});case"password":return(0,o.Y)(J,{onForgotPasswordMethodClick:C?_:S,onShowAlternativeMethodsClick:S,onPasswordPwned:()=>{y(!0),_()}});case"email_code":return(0,o.Y)(x,{factorAlreadyPrepared:d.current===Z(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:S});case"phone_code":return(0,o.Y)(q,{factorAlreadyPrepared:d.current===Z(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:S});case"email_link":return(0,o.Y)(N,{factorAlreadyPrepared:d.current===Z(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:S});case"reset_password_phone_code":return(0,o.Y)(W,{factorAlreadyPrepared:d.current===Z(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:S,onBackLinkClicked:()=>{h((e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor}))),_()},cardSubtitle:(0,b.GQ)("signIn.forgotPassword.subtitle_phone")});case"reset_password_email_code":return(0,o.Y)(W,{factorAlreadyPrepared:d.current===Z(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:S,onBackLinkClicked:()=>{h((e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor}))),_()},cardSubtitle:(0,b.GQ)("signIn.forgotPassword.subtitle_email")});default:return(0,o.Y)(u.LoadingCard,{})}}))),X=e=>{const[t,r]=i.useState(!1),n=i.useCallback((()=>r((e=>!e))),[r]);return t?(0,o.Y)(D.n,{onBackLinkClick:n}):(0,o.Y)(ee,{onBackLinkClick:e.onBackLinkClick,onFactorSelected:e.onFactorSelected,onHavingTroubleClick:n})},ee=e=>{const{onHavingTroubleClick:t,onFactorSelected:r,onBackLinkClick:n}=e,i=(0,I.f0)(),{supportedSecondFactors:a}=(0,s.useCoreSignIn)();return(0,o.Y)(l.Flow.Part,{part:"alternativeMethods",children:(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.FD)(u.Header.Root,{showLogo:!0,children:[(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.title")}),(0,o.Y)(u.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,o.Y)(u.Card.Alert,{children:i.error}),(0,o.FD)(l.Col,{elementDescriptor:l.descriptors.main,gap:3,children:[(0,o.Y)(l.Col,{gap:2,children:a&&a.sort(f.Wy).map(((e,t)=>(0,o.Y)(u.ArrowBlockButton,{textLocalizationKey:te(e),elementDescriptor:l.descriptors.alternativeMethodsBlockButton,textElementDescriptor:l.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:l.descriptors.alternativeMethodsBlockButtonArrow,isDisabled:i.isLoading,onClick:()=>r(e)},t)))}),(0,o.Y)(u.Card.Action,{elementId:"alternativeMethods",children:n&&(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("backButton"),onClick:e.onBackLinkClick})})]})]}),(0,o.Y)(u.Card.Footer,{children:(0,o.FD)(u.Card.Action,{elementId:"havingTrouble",children:[(0,o.Y)(u.Card.ActionText,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:t})]})})]})})};function te(e){switch(e.strategy){case"phone_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,f.uu)(e.safeIdentifier)||""});case"totp":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__totp");case"backup_code":return(0,l.localizationKeys)("signIn.alternativeMethods.blockButton__backupCode");default:throw`Invalid sign in strategy: "${e.strategy}"`}}const re=e=>{const{onShowAlternativeMethodsClicked:t}=e,r=(0,s.useCoreSignIn)(),{navigateAfterSignIn:i}=(0,s.useSignInContext)(),{setActive:a}=(0,n.ho)(),{navigate:p}=(0,c.useRouter)(),g=(0,h.p)(),m=(0,u.useCardState)(),C=(0,f.tJ)("code","",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__backupCode"),isRequired:!0}),w=(0,n.ho)(),v=e=>{var t,r;return(0,P.Kw)(null===(t=e.firstFactorVerification)||void 0===t?void 0:t.strategy)&&"verified"===(null===(r=e.firstFactorVerification)||void 0===r?void 0:r.status)};return(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.FD)(u.Header.Root,{showLogo:!0,children:[(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.backupCodeMfa.title")}),(0,o.Y)(u.Header.Subtitle,{localizationKey:v(r)?(0,l.localizationKeys)("signIn.forgotPassword.subtitle"):(0,l.localizationKeys)("signIn.backupCodeMfa.subtitle")})]}),(0,o.Y)(u.Card.Alert,{children:m.error}),(0,o.Y)(l.Col,{elementDescriptor:l.descriptors.main,gap:8,children:(0,o.FD)(u.Form.Root,{onSubmit:e=>(e.preventDefault(),r.attemptSecondFactor({strategy:"backup_code",code:C.value}).then((e=>{if("complete"===e.status){if(v(e)&&e.createdSessionId){const t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),p(`../reset-password-success?${t.toString()}`)}return a({session:e.createdSessionId,beforeEmit:i})}return console.error((0,d.wv)(e.status,g))})).catch((e=>{if((0,O._d)(e))return w.__internal_navigateWithError("..",e.errors[0]);(0,f.H4)(e,[C],m.setError)}))),children:[(0,o.Y)(u.Form.ControlRow,{elementId:C.id,children:(0,o.Y)(u.Form.PlainInput,{...C.props,autoFocus:!0,onActionClicked:t})}),(0,o.FD)(l.Col,{gap:3,children:[(0,o.Y)(u.Form.SubmitButton,{hasArrow:!0}),(0,o.Y)(u.Card.Action,{elementId:"alternativeMethods",children:t&&(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("footerActionLink__useAnotherMethod"),onClick:t})})]})]})})]}),(0,o.Y)(u.Card.Footer,{})]})},oe=e=>{const t=(0,s.useCoreSignIn)(),r=(0,u.useCardState)(),{navigateAfterSignIn:a}=(0,s.useSignInContext)(),{setActive:p}=(0,n.ho)(),{navigate:g}=(0,c.useRouter)(),m=(0,h.p)(),C=(0,n.ho)();i.useEffect((()=>{e.factorAlreadyPrepared||null==w||w()}),[]);const w=e.prepare?()=>{var t;return null===(t=e.prepare)||void 0===t?void 0:t.call(e).then((()=>e.onFactorPrepare())).catch((e=>{if((0,O._d)(e))return C.__internal_navigateWithError("..",e.errors[0]);(0,f.H4)(e,[],r.setError)}))}:void 0,v=e=>{var t,r;return(0,P.Kw)(null===(t=e.firstFactorVerification)||void 0===t?void 0:t.strategy)&&"verified"===(null===(r=e.firstFactorVerification)||void 0===r?void 0:r.status)};return(0,o.Y)(u.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:v(t)?(0,l.localizationKeys)("signIn.forgotPassword.subtitle"):e.cardSubtitle,resendButton:e.resendButton,inputLabel:e.inputLabel,onCodeEntryFinishedAction:(r,o,n)=>{t.attemptSecondFactor({strategy:e.factor.strategy,code:r}).then((async e=>{if(await o(),"complete"===e.status){if(v(e)&&e.createdSessionId){const t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),g(`../reset-password-success?${t.toString()}`)}return p({session:e.createdSessionId,beforeEmit:a})}return console.error((0,d.wv)(e.status,m))})).catch((e=>(0,O._d)(e)?C.__internal_navigateWithError("..",e.errors[0]):n(e)))},onResendCodeClicked:w,safeIdentifier:"safeIdentifier"in e.factor?e.factor.safeIdentifier:void 0,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,children:v(t)&&(0,o.Y)(l.Text,{localizationKey:(0,l.localizationKeys)("signIn.resetPasswordMfa.detailsLabel"),colorScheme:"secondary"})})},ne=e=>{const t=(0,s.useCoreSignIn)();return(0,o.Y)(l.Flow.Part,{part:"phoneCode2Fa",children:(0,o.Y)(oe,{...e,cardTitle:(0,l.localizationKeys)("signIn.phoneCodeMfa.title"),cardSubtitle:(0,l.localizationKeys)("signIn.phoneCodeMfa.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.phoneCodeMfa.formTitle"),resendButton:(0,l.localizationKeys)("signIn.phoneCodeMfa.resendButton"),prepare:()=>{const{phoneNumberId:r,strategy:o}=e.factor;return t.prepareSecondFactor({phoneNumberId:r,strategy:o})}})})},ie=e=>(0,o.Y)(l.Flow.Part,{part:"totp2Fa",children:(0,o.Y)(oe,{...e,cardTitle:(0,l.localizationKeys)("signIn.totpMfa.title"),cardSubtitle:(0,l.localizationKeys)("signIn.totpMfa.subtitle"),inputLabel:(0,l.localizationKeys)("signIn.totpMfa.formTitle")})}),ae=e=>{if(!e)return"";let t=e.strategy;return"phoneNumberId"in e&&(t+=e.phoneNumberId),t},se=(0,v.SY)((0,u.withCardStateProvider)((function(){const e=(0,s.useCoreSignIn)().supportedSecondFactors,t=i.useRef(""),[r,n]=i.useState((()=>(0,P.R5)(e))),[a,l]=i.useState(!r),c=()=>l((e=>!e)),d=()=>{t.current=ae(r)};if(!r)return(0,o.Y)(u.LoadingCard,{});if(a)return(0,o.Y)(X,{onBackLinkClick:c,onFactorSelected:e=>{n(e),c()}});switch(null==r?void 0:r.strategy){case"phone_code":return(0,o.Y)(ne,{factorAlreadyPrepared:t.current===ae(r),onFactorPrepare:d,factor:r,onShowAlternativeMethodsClicked:c});case"totp":return(0,o.Y)(ie,{factorAlreadyPrepared:t.current===ae(r),onFactorPrepare:d,factor:r,onShowAlternativeMethodsClicked:c});case"backup_code":return(0,o.Y)(re,{onShowAlternativeMethodsClicked:c});default:return(0,o.Y)(u.LoadingCard,{})}}))),le=(0,v.SY)(v.Fv);var ce=r(2201),de=r(6480),ue=r(4870);const pe=({field:e})=>{const[t,r]=(0,i.useState)(!1),n=(0,i.useRef)(null),a=!(!t&&!(null==e?void 0:e.value));return(0,i.useLayoutEffect)((()=>{const e=setInterval((()=>{if(null==n?void 0:n.current){const t="onAutoFillStart"===window.getComputedStyle(n.current,":autofill").animationName;t&&(r(t),clearInterval(e))}}),500);return()=>{clearInterval(e)}}),[]),(0,i.useEffect)((()=>{(null==e?void 0:e.value)&&""!==e.value&&r(!1)}),[null==e?void 0:e.value]),e?(0,o.Y)(u.Form.ControlRow,{elementId:e.id,sx:a?void 0:{position:"absolute",opacity:0,height:0,pointerEvents:"none",marginTop:"-1rem"},children:(0,o.Y)(u.Form.PasswordInput,{...e.props,ref:n,tabIndex:a?void 0:-1})}):null},he=(0,v.SY)((0,u.withCardStateProvider)((function(){var e;const t=(0,u.useCardState)(),r=(0,n.ho)(),a=(0,p.mN)(),{displayConfig:g,userSettings:m}=(0,s.useEnvironment)(),C=(0,s.useCoreSignIn)(),{navigate:w}=(0,c.useRouter)(),I=(0,s.useSignInContext)(),{navigateAfterSignIn:y,signUpUrl:S}=I,_=(0,h.p)(),k=(0,i.useMemo)((()=>(0,v.E9)(m.enabledFirstFactorIdentifiers)),[m.enabledFirstFactorIdentifiers]),{isWebAuthnAutofillSupported:F}=(()=>{const[e,t]=(0,i.useState)(!1),{navigate:r}=(0,c.useRouter)(),o=Q((()=>r("factor-two"))),{userSettings:n}=(0,s.useEnvironment)(),{passkeySettings:a,attributes:l}=n;return(0,i.useEffect)((()=>{a.allow_autofill&&l.passkey.enabled&&async function(){const e=await(0,ce.nn)();t(e),e&&await o({flow:"autofill"})}()}),[]),{isWebAuthnAutofillSupported:e}})(),b=Q((()=>w("factor-two"))),A=(0,ce.Bz)(),z=!!(null===(e=I.initialValues)||void 0===e?void 0:e.phoneNumber)&&!(I.initialValues.emailAddress||I.initialValues.username)&&k.includes("phone_number"),[P,L]=(0,i.useState)(z?"phone_number":k[0]||""),[D,E]=(0,i.useState)(!1),B=(0,ue.hI)("__clerk_ticket")||"",M=m.enabledFirstFactorIdentifiers,R=m.web3FirstFactors,T=m.authenticatableSocialStrategies,U=m.instanceIsPasswordBased,{currentIdentifier:x,nextIdentifier:O}=(0,v.ZN)(k,P),H=(0,f.tJ)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__password"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__password")}),$=I.initialValues||{},N=(0,i.useMemo)((()=>({email_address:$.emailAddress,email_address_username:$.emailAddress||$.username,username:$.username,phone_number:$.phoneNumber})),[I.initialValues]),W=!!T.length||!!R.length,[V,G]=(0,i.useState)(!(0,f.Xb)()&&!W),J=(0,f.tJ)("identifier",N[P]||"",{...x,isRequired:!0,transformer:e=>e.trim()}),q=(0,f.tJ)("identifier",N.phone_number||"",{...x,isRequired:!0}),Z="phone_number"===P?q:J;(0,i.useLayoutEffect)((()=>{var e;Z.value.startsWith("+")&&k.includes("phone_number")&&"phone_number"!==P&&!D&&(e=Z.value,J.setValue(N[P]||""),q.setValue(e),L("phone_number"),G(!0),E(!0))}),[Z.value,k]),(0,i.useEffect)((()=>{B&&(a.setLoading(),t.setLoading(),C.create({strategy:"ticket",ticket:B}).then((e=>{switch(e.status){case"needs_first_factor":return w("factor-one");case"needs_second_factor":return w("factor-two");case"complete":return(0,ue.rw)("__clerk_ticket"),r.setActive({session:e.createdSessionId,beforeEmit:y});default:return void console.error((0,d.wv)(e.status,_))}})).catch((e=>ee(e))).finally((()=>{a.setIdle(),t.setIdle()})))}),[]),(0,i.useEffect)((()=>{!async function(){var e;const r=null===(e=null==C?void 0:C.firstFactorVerification)||void 0===e?void 0:e.error;if(r){switch(r.code){case de.OQ.NOT_ALLOWED_TO_SIGN_UP:case de.OQ.OAUTH_ACCESS_DENIED:case de.OQ.NOT_ALLOWED_ACCESS:case de.OQ.SAML_USER_ATTRIBUTE_MISSING:case de.OQ.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case de.OQ.USER_LOCKED:case de.OQ.EXTERNAL_ACCOUNT_NOT_FOUND:case de.OQ.SIGN_UP_MODE_RESTRICTED:t.setError(r);break;default:t.setError("Unable to complete action at this time. If the problem persists please contact support.")}await C.create({})}}()}),[]);const j=async(...e)=>{var t;try{const o=await((e,t)=>e.then((e=>{var r,o;if(!m.saml.enabled)return e;const n=null===(r=t.find((e=>"password"===e.name)))||void 0===r?void 0:r.value;return!n||(null===(o=e.supportedFirstFactors)||void 0===o?void 0:o.some((e=>"saml"===e.strategy)))?e:e.attemptFirstFactor({strategy:"password",password:n})})))(C.create((e=>{const t=e.some((e=>"password"===e.name&&!!e.value));return t&&!m.saml.enabled||(e=e.filter((e=>"password"!==e.name))),{...(0,f.mK)(e),...t&&!m.saml.enabled&&{strategy:"password"}}})(e)),e);switch(o.status){case"needs_identifier":(null===(t=o.supportedFirstFactors)||void 0===t?void 0:t.some((e=>"saml"===e.strategy)))&&await X();break;case"needs_first_factor":return w("factor-one");case"needs_second_factor":return w("factor-two");case"complete":return r.setActive({session:o.createdSessionId,beforeEmit:y});default:return void console.error((0,d.wv)(o.status,_))}}catch(o){return ee(o)}},X=async()=>{const e=(0,Y.u)(I,g.signInUrl),t=I.afterSignInUrl||"/";return C.authenticateWithRedirect({strategy:"saml",redirectUrl:e,redirectUrlComplete:t})},ee=async e=>{if(!e.errors)return;const o=e.errors.find((e=>e.code===de.OQ.INVALID_STRATEGY_FOR_USER||e.code===de.OQ.FORM_PASSWORD_INCORRECT)),n=e.errors.find((e=>"identifier_already_signed_in"===e.code));if(o)await j(Z);else if(n){const e=n.meta.sessionId;await r.setActive({session:e,beforeEmit:y})}else(0,f.H4)(e,[Z,H],t.setError)},te=(0,i.useMemo)((()=>({tel:u.Form.PhoneInput,password:u.Form.PasswordInput,text:u.Form.PlainInput,email:u.Form.PlainInput}[Z.type])),[Z.type]);if(a.isLoading)return(0,o.Y)(u.LoadingCard,{});const{action:re,...oe}=Z.props;return(0,o.Y)(l.Flow.Part,{part:"start",children:(0,o.FD)(u.Card.Root,{children:[(0,o.FD)(u.Card.Content,{children:[(0,o.FD)(u.Header.Root,{showLogo:!0,children:[(0,o.Y)(u.Header.Title,{localizationKey:(0,l.localizationKeys)("signIn.start.title")}),(0,o.Y)(u.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signIn.start.subtitle")})]}),(0,o.Y)(u.Card.Alert,{children:t.error}),(0,o.FD)(l.Col,{elementDescriptor:l.descriptors.main,gap:6,children:[(0,o.FD)(u.SocialButtonsReversibleContainerWithDivider,{children:[W&&(0,o.Y)(K,{enableWeb3Providers:!0,enableOAuthProviders:!0}),M.length?(0,o.FD)(u.Form.Root,{onSubmit:async e=>(e.preventDefault(),j(Z,H)),gap:8,children:[(0,o.FD)(l.Col,{gap:6,children:[(0,o.Y)(u.Form.ControlRow,{elementId:Z.id,children:(0,o.Y)(te,{actionLabel:null==O?void 0:O.action,onActionClicked:()=>{L((e=>k[(k.indexOf(e)+1)%k.length])),G(!0),E(!1)},...oe,autoFocus:V,autoComplete:F?"webauthn":void 0})}),(0,o.Y)(pe,{field:U?H:void 0})]}),(0,o.Y)(u.Form.SubmitButton,{hasArrow:!0})]}):null]}),m.attributes.passkey.enabled&&m.passkeySettings.show_sign_in_button&&A&&(0,o.Y)(u.Card.Action,{elementId:"usePasskey",children:(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.start.actionLink__use_passkey"),onClick:()=>b({flow:"discoverable"})})})]})]}),(0,o.Y)(u.Card.Footer,{children:m.signUp.mode===de.P6.PUBLIC&&(0,o.FD)(u.Card.Action,{elementId:"signIn",children:[(0,o.Y)(u.Card.ActionText,{localizationKey:(0,l.localizationKeys)("signIn.start.actionText")}),(0,o.Y)(u.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("signIn.start.actionLink"),to:r.buildUrlWithAuth(S)})]})})]})})})));function fe(){const e=(0,n.ho)();return i.useEffect((()=>{e.redirectToSignIn()}),[]),null}function ge(){const e=(0,s.useSignInContext)();return(0,o.Y)(l.Flow.Root,{flow:"signIn",children:(0,o.FD)(c.Switch,{children:[(0,o.Y)(c.Route,{path:"factor-one",children:(0,o.Y)(j,{})}),(0,o.Y)(c.Route,{path:"factor-two",children:(0,o.Y)(se,{})}),(0,o.Y)(c.Route,{path:"reset-password",children:(0,o.Y)(g,{})}),(0,o.Y)(c.Route,{path:"reset-password-success",children:(0,o.Y)(w,{})}),(0,o.Y)(c.Route,{path:"sso-callback",children:(0,o.Y)(le,{signUpUrl:e.signUpUrl,signInUrl:e.signInUrl,signInForceRedirectUrl:e.afterSignInUrl,signUpForceRedirectUrl:e.afterSignUpUrl,continueSignUpUrl:e.signUpContinueUrl,transferable:e.transferable,firstFactorUrl:"../factor-one",secondFactorUrl:"../factor-two",resetPasswordUrl:"../reset-password"})}),(0,o.Y)(c.Route,{path:"choose",children:(0,o.Y)(k,{})}),(0,o.Y)(c.Route,{path:"verify",children:(0,o.Y)(a.Y,{redirectUrlComplete:e.afterSignInUrl,redirectUrl:"../factor-two"})}),(0,o.Y)(c.Route,{index:!0,children:(0,o.Y)(he,{})}),(0,o.Y)(c.Route,{children:(0,o.Y)(fe,{})})]})})}ge.displayName="SignIn";const me=(0,s.withCoreSessionSwitchGuard)(ge),Ce=e=>{const t={signUpUrl:`/${c.VIRTUAL_ROUTER_BASE_PATH}/sign-up`,...e};return(0,o.Y)(c.Route,{path:"sign-in",children:(0,o.Y)(s.ComponentContext.Provider,{value:{componentName:"SignIn",...t,routing:"virtual"},children:(0,o.Y)("div",{children:(0,o.Y)(me,{...t,routing:"virtual"})})})})}},6761:function(e,t,r){r.d(t,{Cm:function(){return d},Kw:function(){return h},R5:function(){return u},xf:function(){return l}}),r(8174);var o=r(2201),n=r(9806),i=r(2375);const a=e=>t=>"safeIdentifier"in t&&t.safeIdentifier===e;function s(e){if((0,o.Bz)()){const t=e.find((({strategy:e})=>"passkey"===e));if(t)return t}return null}function l(e,t,r){return e&&0!==e.length?r===n._o.Password?function(e,t){const r=s(e);if(r)return r;const o=e.sort(i.Kn)[0];return"password"===o.strategy?o:e.find(a(t))||o||null}(e,t):function(e,t){const r=s(e);if(r)return r;const o=e.sort(i.Ih),n=o.find(a(t));if(n)return n;const l=o[0];return"email_link"===l.strategy?l:e.find(a(t))||l||null}(e,t):null}const c=["passkey","email_code","password","phone_code","email_link"];function d(e){return!!e&&c.includes(e.strategy)}function u(e){if(!e||0===e.length)return null;const t=e.find((e=>"totp"===e.strategy));if(t)return t;return e.find((e=>"phone_code"===e.strategy))||e[0]}const p=["reset_password_phone_code","reset_password_email_code"],h=e=>!!e&&p.includes(e)}}]);