"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[862],{2916:function(e,t,a){a.d(t,{A:function(){return p}});var r=a(4380),o=a(3931),i=a(4041),n=a(7362),l=a(9333),s=a(8369),d=a(8313),c=a(9513),u=a(9927),h=a(6912),g=a(2622),m=a(699),v=a(4683);const p=(0,s.withCardStateProvider)((e=>{var t,a;const p=(0,s.useCardState)(),C=(0,n.Xi)({onNextStep:()=>p.setError(void 0)}),z=i.useRef(null),{createOrganization:b,isLoaded:f,setActive:S,userMemberships:Y}=(0,o.D_)({userMemberships:v.mu.userMemberships}),{organization:x}=(0,o.Z5)(),[w,F]=i.useState(),$=(0,u.tJ)("name","",{type:"text",label:(0,c.GQ)("formFieldLabel__organizationName"),placeholder:(0,c.GQ)("formFieldInputPlaceholder__organizationName")}),P=(0,u.tJ)("slug","",{type:"text",label:(0,c.GQ)("formFieldLabel__organizationSlug"),placeholder:(0,c.GQ)("formFieldInputPlaceholder__organizationSlug")}),k=!!$.value,R=()=>{var t;e.navigateAfterCreateOrganization(z.current),null===(t=e.onComplete)||void 0===t||t.call(e)},A=e=>{P.setValue(e)},_="organizationList"===e.flow?"subtitle":void 0;return(0,r.FD)(n.sQ,{...C.props,children:[(0,r.Y)(s.FormContainer,{headerTitle:null===(t=null==e?void 0:e.startPage)||void 0===t?void 0:t.headerTitle,headerSubtitle:null===(a=null==e?void 0:e.startPage)||void 0===a?void 0:a.headerSubtitle,headerTitleTextVariant:"h2",headerSubtitleTextVariant:_,sx:e=>({minHeight:e.sizes.$60,gap:e.space.$6,textAlign:"left"}),children:(0,r.FD)(s.Form.Root,{onSubmit:async t=>{var a,r;if(t.preventDefault(),k&&f)try{const t={name:$.value};e.hideSlug||(t.slug=P.value);const o=await b(t);if(w&&await o.setLogo({file:w}),z.current=o,await S({organization:o}),null===(a=Y.revalidate)||void 0===a||a.call(Y),null!==(r=e.skipInvitationScreen)&&void 0!==r?r:1===o.maxAllowedMemberships)return R();C.nextStep()}catch(o){(0,u.H4)(o,[$,P],p.setError)}},sx:e=>({gap:e.space.$6}),children:[(0,r.Y)(l.Col,{children:(0,r.Y)(m.i,{organization:{name:$.value},onAvatarChange:async e=>await F(e),onAvatarRemove:w?()=>(p.setIdle(),F(null)):null,avatarPreviewPlaceholder:(0,r.Y)(s.IconButton,{variant:"ghost","aria-label":"Upload organization logo",icon:(0,r.Y)(l.Icon,{size:"md",icon:d._O,sx:e=>({color:e.colors.$colorTextSecondary,transitionDuration:e.transitionDuration.$controls})}),sx:e=>({width:e.sizes.$16,height:e.sizes.$16,borderRadius:e.radii.$md,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$dashed,borderColor:e.colors.$neutralAlpha200,backgroundColor:e.colors.$neutralAlpha50,":hover":{backgroundColor:e.colors.$neutralAlpha50,svg:{transform:"scale(1.2)"}}})})})}),(0,r.Y)(s.Form.ControlRow,{elementId:$.id,children:(0,r.Y)(s.Form.PlainInput,{...$.props,onChange:e=>{$.setValue(e.target.value),A((0,u.e9)(e.target.value))},isRequired:!0,autoFocus:!0,ignorePasswordManager:!0})}),!e.hideSlug&&(0,r.Y)(s.Form.ControlRow,{elementId:P.id,children:(0,r.Y)(s.Form.PlainInput,{...P.props,onChange:e=>{A(e.target.value)},isRequired:!0,pattern:"^[a-z0-9\\-]+$",ignorePasswordManager:!0})}),(0,r.FD)(s.FormButtonContainer,{sx:e=>({marginTop:e.space.$none}),children:[(0,r.Y)(s.Form.SubmitButton,{block:!1,isDisabled:!k,localizationKey:(0,c.GQ)("createOrganization.formButtonSubmit")}),e.onCancel&&(0,r.Y)(s.Form.ResetButton,{localizationKey:(0,c.GQ)("userProfile.formButtonReset"),block:!1,onClick:e.onCancel})]})]})}),(0,r.Y)(s.FormContainer,{headerTitle:(0,c.GQ)("organizationProfile.invitePage.title"),headerTitleTextVariant:"h2",headerSubtitleTextVariant:_,sx:e=>({minHeight:e.sizes.$60,textAlign:"left"}),children:x&&(0,r.Y)(h.B,{resetButtonLabel:(0,c.GQ)("createOrganization.invitePage.formButtonReset"),onSuccess:C.nextStep,onReset:R})}),(0,r.FD)(l.Col,{children:[(0,r.Y)(s.Header.Root,{children:(0,r.Y)(s.Header.Title,{localizationKey:(0,c.GQ)("organizationProfile.invitePage.title"),sx:{textAlign:"left"}})}),(0,r.Y)(s.SuccessPage,{contents:(0,r.Y)(g.k,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:R})]})]})}))},2525:function(e,t,a){a.r(t),a.d(t,{CreateOrganization:function(){return g},CreateOrganizationModal:function(){return m}});var r=a(4380),o=a(844),i=a(9333),n=a(8369),l=a(166),s=a(3931),d=a(3006),c=a(2916);const u=(0,n.withCardStateProvider)((()=>{const{closeCreateOrganization:e}=(0,s.ho)(),{mode:t,navigateAfterCreateOrganization:a,skipInvitationScreen:l,hideSlug:u}=(0,o.useCreateOrganizationContext)(),h=(0,n.useCardState)(),{showDevModeNotice:g}=(0,d.Q)();return(0,r.FD)(n.Card.Root,{sx:e=>({width:e.sizes.$108}),children:[(0,r.FD)(n.Card.Content,{sx:e=>({padding:`${e.space.$4} ${e.space.$5} ${g?e.space.$12:e.space.$6}`}),children:[(0,r.Y)(n.Card.Alert,{children:h.error}),(0,r.Y)(c.A,{skipInvitationScreen:l,startPage:{headerTitle:(0,i.localizationKeys)("createOrganization.title")},navigateAfterCreateOrganization:a,flow:"default",onComplete:()=>{"modal"===t&&e()},hideSlug:u})]}),(0,r.Y)(n.Card.Footer,{})]})})),h=(0,o.withCoreUserGuard)((()=>(0,r.Y)(u,{}))),g=(0,n.withCardStateProvider)((()=>(0,r.Y)(i.Flow.Root,{flow:"createOrganization",children:(0,r.Y)(i.Flow.Part,{children:(0,r.Y)(l.Switch,{children:(0,r.Y)(l.Route,{children:(0,r.Y)(h,{})})})})}))),m=e=>{const t={...e,routing:"virtual",componentName:"CreateOrganization",mode:"modal"};return(0,r.Y)(l.Route,{path:"createOrganization",children:(0,r.Y)(o.ComponentContext.Provider,{value:t,children:(0,r.Y)("div",{children:(0,r.Y)(g,{})})})})}}}]);